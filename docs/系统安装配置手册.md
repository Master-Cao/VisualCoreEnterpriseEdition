# VisionCore Enterprise Edition - ç³»ç»Ÿå®‰è£…é…ç½®æ‰‹å†Œ

> **ç‰ˆæœ¬**: v1.3.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-26  
> **é€‚ç”¨å¹³å°**: Windows 10+, Ubuntu 18.04+, RK3588

---

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [å¿«é€Ÿå®‰è£…](#å¿«é€Ÿå®‰è£…)
- [è¯¦ç»†å®‰è£…æ­¥éª¤](#è¯¦ç»†å®‰è£…æ­¥éª¤)
- [é…ç½®æ–‡ä»¶è¯¦è§£](#é…ç½®æ–‡ä»¶è¯¦è§£)
- [C++æ¨¡å—ç¼–è¯‘](#cæ¨¡å—ç¼–è¯‘)
- [Dockeréƒ¨ç½²](#dockeréƒ¨ç½²)
- [ç³»ç»ŸæœåŠ¡é…ç½®](#ç³»ç»ŸæœåŠ¡é…ç½®)
- [ç½‘ç»œé…ç½®](#ç½‘ç»œé…ç½®)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

#### PCå¹³å°ï¼ˆx86_64ï¼‰

| ç»„ä»¶ | æœ€ä½é…ç½® | æ¨èé…ç½® |
|------|----------|----------|
| **CPU** | Intel Core i5 / AMD Ryzen 5 | Intel Core i7+ / AMD Ryzen 7+ |
| **å†…å­˜** | 8GB | 16GB+ |
| **GPU** | æ— ï¼ˆCPUæ¨ç†ï¼‰ | NVIDIA GTX 1650+ (CUDAæ”¯æŒ) |
| **å­˜å‚¨** | 20GBå¯ç”¨ç©ºé—´ | 50GB+ SSD |
| **ç½‘ç»œ** | åƒå…†ç½‘å¡ | åƒå…†ç½‘å¡ |

#### åµŒå…¥å¼å¹³å°ï¼ˆARM64ï¼‰

| ç»„ä»¶ | æ”¯æŒå¹³å° |
|------|----------|
| **SoC** | RK3588, RK3566 |
| **å†…å­˜** | 4GB+ |
| **å­˜å‚¨** | 16GB+ eMMC/SDå¡ |
| **NPU** | éœ€è¦NPUé©±åŠ¨æ”¯æŒ |

### è½¯ä»¶è¦æ±‚

#### æ“ä½œç³»ç»Ÿ

- **Windows**: Windows 10 (64ä½) æˆ–æ›´é«˜ç‰ˆæœ¬
- **Linux**: Ubuntu 18.04+, Debian 10+, CentOS 7+
- **ARM**: Debian/Ubuntu on RK3588

#### Pythonç¯å¢ƒ

- **Pythonç‰ˆæœ¬**: 3.8, 3.9, 3.10ï¼ˆæ¨è3.9ï¼‰
- **pip**: æœ€æ–°ç‰ˆæœ¬
- **è™šæ‹Ÿç¯å¢ƒ**: æ¨èä½¿ç”¨venvæˆ–conda

#### ä¾èµ–è½¯ä»¶

**PCå¹³å°**:
- GCC/G++ 7.0+ (Linux) æˆ– MSVC 2019+ (Windows)
- CMake 3.15+ (ä»…éœ€ç¼–è¯‘C++æ¨¡å—æ—¶)
- CUDA 11.8+ (å¯é€‰ï¼ŒGPUåŠ é€Ÿ)

**åµŒå…¥å¼å¹³å°**:
- GCC/G++ 7.0+
- CMake 3.15+
- RKNN SDK (librknn_api.so)

---

## å¿«é€Ÿå®‰è£…

### æ–¹æ³•1: æ ‡å‡†å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd VisualCoreEnterpriseEdition

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# Windowsæ¿€æ´»:
venv\Scripts\activate

# Linux/Macæ¿€æ´»:
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç³»ç»Ÿ
cp configs/config.yaml configs/config.yaml.bak
# ç¼–è¾‘ configs/config.yamlï¼Œé…ç½®ç›¸æœºIPã€TCPç«¯å£ç­‰

# 5. è¿è¡Œç³»ç»Ÿ
python -m app.main
```

### æ–¹æ³•2: Dockerå®‰è£…

```bash
# CPUç‰ˆæœ¬
cd docker
docker-compose up -d

# GPUç‰ˆæœ¬
docker-compose -f docker-compose.gpu.yml up -d

# RK3588ç‰ˆæœ¬ï¼ˆåœ¨RK3588è®¾å¤‡ä¸Šï¼‰
./docker-build-rk3588.sh
docker-compose -f docker-compose.rk3588.yml up -d
```

---

## è¯¦ç»†å®‰è£…æ­¥éª¤

### æ­¥éª¤1: ç¯å¢ƒå‡†å¤‡

#### Windowså¹³å°

```powershell
# 1. å®‰è£…Python 3.9
# ä¸‹è½½åœ°å€: https://www.python.org/downloads/
# å®‰è£…æ—¶å‹¾é€‰"Add Python to PATH"

# 2. éªŒè¯å®‰è£…
python --version
pip --version

# 3. å®‰è£…Microsoft C++ Build Toolsï¼ˆå¯é€‰ï¼Œç¼–è¯‘C++æ¨¡å—éœ€è¦ï¼‰
# ä¸‹è½½åœ°å€: https://visualstudio.microsoft.com/downloads/
# é€‰æ‹©"Desktop development with C++"
```

#### Linuxå¹³å°

```bash
# 1. æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update
sudo apt upgrade -y

# 2. å®‰è£…Pythonå’Œå¼€å‘å·¥å…·
sudo apt install -y python3.9 python3.9-venv python3-pip
sudo apt install -y build-essential cmake git

# 3. éªŒè¯å®‰è£…
python3.9 --version
pip3 --version
```

#### RK3588å¹³å°

```bash
# 1. å®‰è£…åŸºç¡€å·¥å…·
sudo apt update
sudo apt install -y python3.9 python3.9-venv python3-pip
sudo apt install -y build-essential cmake git

# 2. å®‰è£…RKNNä¾èµ–
sudo apt install -y libopencv-dev

# 3. å®‰è£…RKNN Toolkit2ï¼ˆæ ¹æ®RK3588å‹å·é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼‰
pip install scripts/rknn_toolkit2-2.3.2-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl
```

### æ­¥éª¤2: é¡¹ç›®ä¸‹è½½

```bash
# æ–¹æ³•1: Gitå…‹éš†ï¼ˆæ¨èï¼‰
git clone <repository-url>
cd VisualCoreEnterpriseEdition

# æ–¹æ³•2: ä¸‹è½½ZIPåŒ…
# 1. ä¸‹è½½é¡¹ç›®ZIPåŒ…
# 2. è§£å‹åˆ°ç›®æ ‡ç›®å½•
# 3. cdåˆ°é¡¹ç›®æ ¹ç›®å½•
```

### æ­¥éª¤3: è™šæ‹Ÿç¯å¢ƒé…ç½®

#### ä½¿ç”¨venvï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate

# Linux/Mac:
source venv/bin/activate

# å‡çº§pip
pip install --upgrade pip
```

#### ä½¿ç”¨conda

```bash
# åˆ›å»ºcondaç¯å¢ƒ
conda create -n visioncore python=3.9 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate visioncore
```

### æ­¥éª¤4: å®‰è£…Pythonä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt

# å¦‚æœåœ¨å›½å†…ï¼Œä½¿ç”¨é•œåƒåŠ é€Ÿ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# éªŒè¯æ ¸å¿ƒä¾èµ–
python -c "import cv2, numpy, ultralytics, paho.mqtt, paramiko, yaml; print('âœ“ æ‰€æœ‰ä¾èµ–å®‰è£…æˆåŠŸ')"
```

#### GPUåŠ é€Ÿæ”¯æŒï¼ˆå¯é€‰ï¼‰

```bash
# æ–¹æ³•1: è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118

# æ–¹æ³•2: è®¿é—®PyTorchå®˜ç½‘è·å–é€‚åˆæ‚¨ç³»ç»Ÿçš„å®‰è£…å‘½ä»¤
# https://pytorch.org/get-started/locally/

# éªŒè¯GPUå¯ç”¨æ€§
python -c "import torch; print(f'CUDAå¯ç”¨: {torch.cuda.is_available()}')"
```

### æ­¥éª¤5: æ¨¡å‹æ–‡ä»¶å‡†å¤‡

```bash
# 1. åˆ›å»ºæ¨¡å‹ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
mkdir -p models

# 2. æ”¾ç½®æ¨¡å‹æ–‡ä»¶
# PCå¹³å°: å°† .pt æ–‡ä»¶æ”¾åˆ° models/ ç›®å½•
# RK3588å¹³å°: å°† .rknn æ–‡ä»¶æ”¾åˆ° models/ ç›®å½•

# 3. éªŒè¯æ¨¡å‹æ–‡ä»¶
ls -lh models/
# åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
# seasoning_11.18.pt (PC)
# seasoning_11.18.float.rknn (RK3588)
```

### æ­¥éª¤6: é…ç½®æ–‡ä»¶è®¾ç½®

```bash
# 1. å¤‡ä»½åŸé…ç½®
cp configs/config.yaml configs/config.yaml.backup

# 2. ç¼–è¾‘é…ç½®æ–‡ä»¶
nano configs/config.yaml  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨

# 3. å¿…é¡»é…ç½®çš„é¡¹ç›®ï¼š
#    - camera.connection.ip: ç›¸æœºIPåœ°å€
#    - DetectionServer.host: TCPæœåŠ¡å™¨IP
#    - model.path: æ¨¡å‹æ–‡ä»¶è·¯å¾„
#    - mqtt.enable: æ˜¯å¦å¯ç”¨MQTTï¼ˆå¯é€‰ï¼‰
#    - sftp.enable: æ˜¯å¦å¯ç”¨SFTPï¼ˆå¯é€‰ï¼‰
```

#### æœ€å°åŒ–é…ç½®ç¤ºä¾‹

```yaml
# æœ€ç®€å•çš„å¯è¿è¡Œé…ç½®
logging:
  enable: true
  level: INFO

camera:
  enable: true
  connection:
    ip: 192.168.2.99        # ä¿®æ”¹ä¸ºå®é™…ç›¸æœºIP
    port: 2122

model:
  backend: auto
  path: models/seasoning_11.18.pt  # ä¿®æ”¹ä¸ºå®é™…æ¨¡å‹æ–‡ä»¶
  conf_threshold: 0.7

DetectionServer:
  enable: true
  host: 0.0.0.0             # ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
  port: 8888

mqtt:
  enable: false             # åˆæ¬¡æµ‹è¯•å¯ç¦ç”¨

sftp:
  enable: false             # åˆæ¬¡æµ‹è¯•å¯ç¦ç”¨

roi:
  enable: true
  minArea: 3000
```

### æ­¥éª¤7: é¦–æ¬¡è¿è¡Œæµ‹è¯•

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœè¿˜æœªæ¿€æ´»ï¼‰
source venv/bin/activate  # Linux
# æˆ–
venv\Scripts\activate     # Windows

# 2. è¿è¡Œç³»ç»Ÿ
python -m app.main

# 3. è§‚å¯Ÿå¯åŠ¨æ—¥å¿—
# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# VisionCorePro starting...
# âœ“ TCPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ | 0.0.0.0:8888
# âœ“ ç›¸æœºè¿æ¥æˆåŠŸ | 192.168.2.99:2122
# âœ“ æ£€æµ‹å™¨åŠ è½½æˆåŠŸ | åç«¯: auto
# âœ“ æœåŠ¡å·²å¯åŠ¨ï¼Œç›‘æ§å™¨æ­£åœ¨è¿è¡Œ
```

---

## é…ç½®æ–‡ä»¶è¯¦è§£

### æ—¥å¿—é…ç½®

```yaml
logging:
  enable: true              # æ˜¯å¦å¯ç”¨æ—¥å¿—
  level: INFO               # æ—¥å¿—çº§åˆ«: DEBUG | INFO | WARNING | ERROR
  console:
    enable: true            # æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å°
  file:
    enable: true            # æ˜¯å¦è¾“å‡ºåˆ°æ–‡ä»¶
    path: logs              # æ—¥å¿—æ–‡ä»¶ç›®å½•
    backup_count: 30        # æ—¥å¿—æ–‡ä»¶ä¿ç•™å¤©æ•°
```

### ç›‘æ§é…ç½®

```yaml
board_mode:
  retry_delay: 5            # ç»„ä»¶é‡å¯é—´éš”ï¼ˆç§’ï¼‰
  debug_warmup: false       # æ˜¯å¦å¯ç”¨é¢„çƒ­è°ƒè¯•
  monitoring:
    check_interval: 30      # å¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
    failure_threshold: 1    # å¤±è´¥æ¬¡æ•°é˜ˆå€¼
```

### ç›¸æœºé…ç½®

```yaml
camera:
  enable: true              # æ˜¯å¦å¯ç”¨ç›¸æœº
  # backend: cpp            # å¯é€‰ï¼šcppï¼ˆé«˜æ€§èƒ½ï¼‰| sickï¼ˆPythonï¼‰
  connection:
    ip: 192.168.2.99        # ç›¸æœºIPåœ°å€
    port: 2122              # ç›¸æœºç«¯å£
    timeout: 0              # è¿æ¥è¶…æ—¶ï¼ˆ0=æ— é™ï¼‰
  mode:
    useSingleStep: true     # å•æ­¥æ¨¡å¼
  auth:
    loginAttempts:          # ç™»å½•å°è¯•åˆ—è¡¨ï¼ˆæŒ‰é¡ºåºï¼‰
    - level: service
      password: '123456'
    - level: client
      password: CLIENT
```

**è¯´æ˜**:
- `backend`: ä¸æŒ‡å®šæ—¶è‡ªåŠ¨é€‰æ‹©ï¼ˆä¼˜å…ˆC++ï¼‰
- `ip`: å¿…é¡»ä¸ç›¸æœºåœ¨åŒä¸€ç½‘æ®µ
- `loginAttempts`: ç³»ç»Ÿä¼šæŒ‰é¡ºåºå°è¯•ç™»å½•

### æ£€æµ‹æ¨¡å‹é…ç½®

```yaml
model:
  backend: auto             # åç«¯é€‰æ‹©: auto | pc | rknn
  use_cpp: true             # æ˜¯å¦ä½¿ç”¨C++å®ç°ï¼ˆRKNNæ¨¡å¼ï¼‰
  model_name: seasoning_11.18.pt
  model_file: models
  path: models/seasoning_11.18.pt
  conf_threshold: 0.7       # ç½®ä¿¡åº¦é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰
  nms_threshold: 0.6        # NMSé˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰
  target: rk3588            # RKNNç›®æ ‡å¹³å°
```

**è¯´æ˜**:
- `backend: auto`: Windowsé€‰æ‹©pcï¼ŒLinuxé€‰æ‹©rknn
- `backend: pc`: ä½¿ç”¨Ultralytics YOLOï¼ˆCPU/GPUï¼‰
- `backend: rknn`: ä½¿ç”¨RKNN NPUåŠ é€Ÿ
- `use_cpp: true`: RKNNæ¨¡å¼ä¸‹ä¼˜å…ˆä½¿ç”¨C++å®ç°ï¼ˆæ›´å¿«ï¼‰
- `conf_threshold`: è¶Šé«˜è¶Šä¸¥æ ¼ï¼Œå‡å°‘è¯¯æ£€
- `nms_threshold`: è¶Šé«˜ä¿ç•™è¶Šå¤šé‡å æ¡†

### TCPæœåŠ¡å™¨é…ç½®

```yaml
DetectionServer:
  enable: true              # æ˜¯å¦å¯ç”¨TCPæœåŠ¡å™¨
  host: 192.168.2.126       # ç›‘å¬IPï¼ˆ0.0.0.0ç›‘å¬æ‰€æœ‰ï¼‰
  port: 8888                # ç›‘å¬ç«¯å£
  max_connections: 15       # æœ€å¤§å¹¶å‘è¿æ¥æ•°
  buffer_size: 4096         # æ¥æ”¶ç¼“å†²åŒºå¤§å°
  connection_timeout: 300   # è¿æ¥è¶…æ—¶ï¼ˆç§’ï¼‰
  heartbeat_interval: 30    # å¿ƒè·³æ£€æµ‹é—´éš”ï¼ˆç§’ï¼‰
```

**è¯´æ˜**:
- `host: 0.0.0.0`: ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼ˆæ¨èï¼‰
- `host: 192.168.x.x`: ä»…ç›‘å¬æŒ‡å®šç½‘å¡
- `port`: ç¡®ä¿ç«¯å£æœªè¢«å ç”¨

### MQTTé…ç½®

```yaml
mqtt:
  enable: true              # æ˜¯å¦å¯ç”¨MQTT
  connection:
    broker_host: 192.168.2.126
    broker_port: 1883
    client_id: visioncorepro
    keepalive: 60
  qos:
    subscribe: 2            # QoSçº§åˆ«: 0 | 1 | 2
  topics:
    subscribe:
      system_command: visual/system/command
    publish:
      message: visual/system/result
```

**è¯´æ˜**:
- éå…³é”®ç»„ä»¶ï¼Œè¿æ¥å¤±è´¥ä¸å½±å“TCPæœåŠ¡
- QoS 2æä¾›æœ€é«˜å¯é æ€§ï¼ˆç²¾ç¡®ä¸€æ¬¡ä¼ é€’ï¼‰

### ROIé…ç½®

```yaml
roi:
  enable: true              # æ˜¯å¦å¯ç”¨ROI
  minArea: 3000             # æœ€å°é¢ç§¯ï¼ˆåƒç´ ï¼‰
  depthThreshold: 665       # æ·±åº¦é˜ˆå€¼ï¼ˆmmï¼‰ï¼Œè¿‡æ»¤è¿‡æ·±ç›®æ ‡
  
  # é®æŒ¡æ£€æµ‹é…ç½®
  occlusion:
    intervalThreshold: 700  # TCPé—´éš”é˜ˆå€¼ï¼ˆmsï¼‰
    ignoreCount: 3          # å¿½ç•¥æ£€æµ‹æ¬¡æ•°
  
  regions:
  - name: main_work_area
    shape: rectangle
    width: 150              # ROIå®½åº¦
    height: 100             # ROIé«˜åº¦
    offsetx: 0              # Xåç§»
    offsety: 30             # Yåç§»
    priority: 1             # ä¼˜å…ˆçº§ï¼ˆ1æœ€é«˜ï¼‰
  
  - name: backup_area
    shape: rectangle
    width: 150
    height: 100
    offsetx: 90
    offsety: 140
    priority: 2
```

**è¯´æ˜**:
- `minArea`: è¿‡æ»¤å°äºæ­¤é¢ç§¯çš„æ£€æµ‹ç»“æœ
- `depthThreshold`: æ·±åº¦å€¼ï¼ˆZåæ ‡ï¼‰å°äºæ­¤å€¼çš„ç›®æ ‡ä¼šè¢«è¿‡æ»¤
- `occlusion.intervalThreshold`: å½“ä¸¤æ¬¡TCPè¯·æ±‚é—´éš”è¶…è¿‡æ­¤å€¼ï¼Œè®¤ä¸ºæœºå™¨äººæ­£åœ¨åŠ¨ä½œ
- `occlusion.ignoreCount`: æ£€æµ‹åˆ°æœºå™¨äººåŠ¨ä½œåï¼Œæ¥ä¸‹æ¥Næ¬¡æ£€æµ‹è¿”å›é®æŒ¡æ ‡å¿—
- å¤šä¸ªROIæŒ‰priorityä¼˜å…ˆçº§å¤„ç†ï¼Œå…ˆåœ¨é«˜ä¼˜å…ˆçº§ROIä¸­æŸ¥æ‰¾ç›®æ ‡

### SFTPé…ç½®

```yaml
sftp:
  enable: true              # æ˜¯å¦å¯ç”¨SFTP
  host: 192.168.2.126
  port: 22
  username: qt
  password: '123456'
  remote_path: /
  prefix: D://Camera        # è¿œç¨‹è·¯å¾„å‰ç¼€
  connection_timeout: 15
```

**è¯´æ˜**:
- éå…³é”®ç»„ä»¶ï¼Œè¿æ¥å¤±è´¥ä¸å½±å“æ£€æµ‹åŠŸèƒ½
- ç”¨äºä¸Šä¼ æ£€æµ‹å›¾åƒã€æ ‡å®šå›¾åƒç­‰
- `prefix`: æ–‡ä»¶åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å­˜å‚¨è·¯å¾„å‰ç¼€

---

## C++æ¨¡å—ç¼–è¯‘

VisionCoreæ”¯æŒé«˜æ€§èƒ½C++åç«¯ï¼Œæä¾›æ›´å¿«çš„æ¨ç†é€Ÿåº¦ã€‚C++æ¨¡å—æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç¼–è¯‘å¤±è´¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°Pythonå®ç°ã€‚

### Windowså¹³å°ç¼–è¯‘

#### å‰ç½®è¦æ±‚

1. **Visual Studio 2019+** (å«C++æ¡Œé¢å¼€å‘å·¥å…·)
2. **CMake 3.15+**
3. **Python 3.8-3.10** (éœ€è¦ä¸è¿è¡Œç¯å¢ƒä¸€è‡´)

#### ç¼–è¯‘æ­¥éª¤

```powershell
# 1. è¿›å…¥C++ç›®å½•
cd services\cpp

# 2. è¿è¡Œæ„å»ºè„šæœ¬
.\build.bat

# 3. æŸ¥çœ‹ç¼–è¯‘äº§ç‰©
dir dist\Release\
# åº”è¯¥çœ‹åˆ°ï¼š
# vc_camera_cpp.pyd
# vc_detection_cpp.pyd (å¦‚æœç¼–è¯‘æ£€æµ‹æ¨¡å—)

# 4. å¤åˆ¶åˆ°Pythonå¯è®¿é—®ä½ç½®
copy dist\Release\vc_camera_cpp.pyd ..\camera\
copy dist\Release\vc_detection_cpp.pyd ..\detection\
```

#### æ‰‹åŠ¨ç¼–è¯‘

```powershell
# 1. åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# 2. é…ç½®CMake
cmake .. -G "Visual Studio 16 2019" -A x64

# 3. ç¼–è¯‘
cmake --build . --config Release

# 4. æŸ¥çœ‹äº§ç‰©
dir Release\
```

### Linuxå¹³å°ç¼–è¯‘

#### å‰ç½®è¦æ±‚

```bash
sudo apt install -y build-essential cmake python3-dev
```

#### ç¼–è¯‘æ­¥éª¤

```bash
# 1. è¿›å…¥C++ç›®å½•
cd services/cpp

# 2. è¿è¡Œæ„å»ºè„šæœ¬
chmod +x build.sh
./build.sh

# 3. æŸ¥çœ‹ç¼–è¯‘äº§ç‰©
ls -l dist/
# åº”è¯¥çœ‹åˆ°ï¼š
# vc_camera_cpp.so
# vc_detection_cpp.so

# 4. å¤åˆ¶åˆ°Pythonå¯è®¿é—®ä½ç½®
cp dist/vc_camera_cpp.so ../camera/
cp dist/vc_detection_cpp.so ../detection/
```

### RK3588å¹³å°ç¼–è¯‘

```bash
# 1. ç¡®ä¿å®‰è£…äº†RKNN SDK
ls /usr/lib/librknn_api.so

# 2. ç¼–è¯‘
cd services/cpp
./build.sh

# 3. éªŒè¯
python3 -c "import vc_camera_cpp; print('âœ“ C++ç›¸æœºæ¨¡å—å¯ç”¨')"
python3 -c "import vc_detection_cpp; print('âœ“ C++æ£€æµ‹æ¨¡å—å¯ç”¨')"
```

### ç¼–è¯‘é—®é¢˜æ’æŸ¥

**é—®é¢˜1: CMakeæ‰¾ä¸åˆ°Python**

```bash
# æŒ‡å®šPythonè·¯å¾„
cmake .. -DPYTHON_EXECUTABLE=/usr/bin/python3.9
```

**é—®é¢˜2: pybind11æ‰¾ä¸åˆ°**

```bash
# å®‰è£…pybind11-dev
sudo apt install -y pybind11-dev
```

**é—®é¢˜3: SICK SDKæ‰¾ä¸åˆ°**

```bash
# ç¡®ä¿SICK SDKåœ¨æ­£ç¡®è·¯å¾„
ls infrastructure/sick_visionary_cpp_shared/
```

---

## Dockeréƒ¨ç½²

è¯¦è§ `docker/README.md` å’Œ `docker/DOCKER_GUIDE_RK3588.md`

### å¿«é€Ÿå¼€å§‹

```bash
# CPUç‰ˆæœ¬
cd docker
docker build -f Dockerfile -t visioncore-ee:latest ..
docker-compose up -d

# GPUç‰ˆæœ¬
docker build -f Dockerfile.gpu -t visioncore-ee:gpu ..
docker-compose -f docker-compose.gpu.yml up -d

# RK3588ç‰ˆæœ¬
./docker-build-rk3588.sh
docker-compose -f docker-compose.rk3588.yml up -d
```

---

## ç³»ç»ŸæœåŠ¡é…ç½®

### Linux systemdæœåŠ¡

```bash
# 1. ç¼–è¾‘æœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/visioncore.service
```

```ini
[Unit]
Description=VisionCore Enterprise Edition
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/opt/VisionCoreEE
ExecStart=/opt/VisionCoreEE/venv/bin/python -m app.main
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# 2. é‡è½½systemd
sudo systemctl daemon-reload

# 3. å¯ç”¨å¼€æœºè‡ªå¯
sudo systemctl enable visioncore

# 4. å¯åŠ¨æœåŠ¡
sudo systemctl start visioncore

# 5. æŸ¥çœ‹çŠ¶æ€
sudo systemctl status visioncore

# 6. æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u visioncore -f
```

### WindowsæœåŠ¡

ä½¿ç”¨NSSM (Non-Sucking Service Manager):

```cmd
# 1. ä¸‹è½½NSSM
# https://nssm.cc/download

# 2. å®‰è£…æœåŠ¡
nssm install VisionCoreEE "C:\Python39\python.exe" "C:\VisionCoreEE\app\main.py"

# 3. é…ç½®æœåŠ¡
nssm set VisionCoreEE AppDirectory C:\VisionCoreEE
nssm set VisionCoreEE DisplayName "VisionCore Enterprise Edition"
nssm set VisionCoreEE Description "å·¥ä¸šè§†è§‰æ£€æµ‹ç³»ç»Ÿ"

# 4. å¯åŠ¨æœåŠ¡
nssm start VisionCoreEE

# 5. æŸ¥çœ‹çŠ¶æ€
nssm status VisionCoreEE
```

---

## ç½‘ç»œé…ç½®

### ç›¸æœºç½‘ç»œé…ç½®

1. **é…ç½®PCç½‘å¡**:
   - IPåœ°å€: `192.168.2.x` (ä¸ç›¸æœºåŒç½‘æ®µ)
   - å­ç½‘æ©ç : `255.255.255.0`
   - ç½‘å…³: (å¯é€‰)

2. **æµ‹è¯•è¿é€šæ€§**:
```bash
ping 192.168.2.99
telnet 192.168.2.99 2122
```

### é˜²ç«å¢™é…ç½®

#### Windowsé˜²ç«å¢™

```powershell
# å…è®¸TCPç«¯å£8888
netsh advfirewall firewall add rule name="VisionCore TCP" dir=in action=allow protocol=TCP localport=8888

# å…è®¸MQTTç«¯å£1883
netsh advfirewall firewall add rule name="VisionCore MQTT" dir=in action=allow protocol=TCP localport=1883
```

#### Linuxé˜²ç«å¢™

```bash
# UFW
sudo ufw allow 8888/tcp
sudo ufw allow 1883/tcp

# firewalld
sudo firewall-cmd --permanent --add-port=8888/tcp
sudo firewall-cmd --permanent --add-port=1883/tcp
sudo firewall-cmd --reload
```

---

## å¸¸è§é—®é¢˜

### Q1: pipå®‰è£…ä¾èµ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ä½¿ç”¨å›½å†…é•œåƒ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

### Q2: ç›¸æœºæ— æ³•è¿æ¥

**æ£€æŸ¥æ¸…å•**:
1. ç½‘ç»œè¿é€šæ€§: `ping 192.168.2.99`
2. ç«¯å£å¯è¾¾æ€§: `telnet 192.168.2.99 2122`
3. é…ç½®æ–‡ä»¶ä¸­IPåœ°å€æ­£ç¡®
4. ç›¸æœºç”µæºæ­£å¸¸
5. ç½‘çº¿è¿æ¥æ­£å¸¸

### Q3: GPUä¸å¯ç”¨

```bash
# éªŒè¯CUDAå®‰è£…
nvidia-smi

# éªŒè¯PyTorch CUDAæ”¯æŒ
python -c "import torch; print(torch.cuda.is_available())"

# é‡æ–°å®‰è£…PyTorch with CUDA
pip uninstall torch torchvision
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

### Q4: C++æ¨¡å—å¯¼å…¥å¤±è´¥

```bash
# éªŒè¯æ–‡ä»¶å­˜åœ¨
ls services/camera/vc_camera_cpp.pyd  # Windows
ls services/camera/vc_camera_cpp.so   # Linux

# ç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°Pythonå®ç°ï¼Œä¸å½±å“åŠŸèƒ½
```

### Q5: ç«¯å£è¢«å ç”¨

```bash
# WindowsæŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr :8888

# LinuxæŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8888

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

---

## éªŒè¯å®‰è£…

å®Œæˆå®‰è£…åï¼Œè¿è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

```bash
# 1. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# 2. æ£€æŸ¥Pythonä¾èµ–
python -c "import cv2, numpy, ultralytics, yaml; print('âœ“ ä¾èµ–æ­£å¸¸')"

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶
python -c "import yaml; yaml.safe_load(open('configs/config.yaml')); print('âœ“ é…ç½®æ­£å¸¸')"

# 4. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -lh models/*.pt models/*.rknn

# 5. è¿è¡Œç³»ç»Ÿ
python -m app.main

# 6. åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•TCPè¿æ¥
telnet localhost 8888
```

---

## ä¸‹ä¸€æ­¥

å®‰è£…å®Œæˆåï¼Œè¯·é˜…è¯»ï¼š

- **[APIæ¥å£ä½¿ç”¨æ‰‹å†Œ](./APIæ¥å£ä½¿ç”¨æ‰‹å†Œ.md)** - äº†è§£å¦‚ä½•ä½¿ç”¨TCPå’ŒMQTTæ¥å£
- **[æ ‡å®šæ“ä½œæ‰‹å†Œ](./æ ‡å®šæ“ä½œæ‰‹å†Œ.md)** - å­¦ä¹ åæ ‡æ ‡å®šæµç¨‹
- **[æ•…éšœæ’æŸ¥æ‰‹å†Œ](./æ•…éšœæ’æŸ¥æ‰‹å†Œ.md)** - é‡åˆ°é—®é¢˜æ—¶æŸ¥é˜…

---

<div align="center">

**VisionCore Enterprise Edition**  
*ä¸“ä¸šå·¥ä¸šè§†è§‰æ£€æµ‹ç³»ç»Ÿ*

</div>

