# VisionCore Enterprise Edition - æ•…éšœæ’æŸ¥æ‰‹å†Œ

> **ç‰ˆæœ¬**: v1.3.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-26  
> **æ–‡æ¡£ç±»å‹**: æ•…éšœæ’é™¤æŒ‡å—

---

## ğŸ“‹ ç›®å½•

- [å¿«é€Ÿè¯Šæ–­](#å¿«é€Ÿè¯Šæ–­)
- [å¯åŠ¨é—®é¢˜](#å¯åŠ¨é—®é¢˜)
- [ç›¸æœºé—®é¢˜](#ç›¸æœºé—®é¢˜)
- [æ£€æµ‹é—®é¢˜](#æ£€æµ‹é—®é¢˜)
- [é€šä¿¡é—®é¢˜](#é€šä¿¡é—®é¢˜)
- [æ€§èƒ½é—®é¢˜](#æ€§èƒ½é—®é¢˜)
- [æ ‡å®šé—®é¢˜](#æ ‡å®šé—®é¢˜)
- [æ—¥å¿—åˆ†æ](#æ—¥å¿—åˆ†æ)
- [ç³»ç»Ÿæ¢å¤](#ç³»ç»Ÿæ¢å¤)
- [è”ç³»æ”¯æŒ](#è”ç³»æ”¯æŒ)

---

## å¿«é€Ÿè¯Šæ–­

### è¯Šæ–­æµç¨‹å›¾

```mermaid
graph TD
    Start[ç³»ç»Ÿæ•…éšœ] --> Q1{èƒ½å¯åŠ¨å—?}
    Q1 -->|å¦| A[æ£€æŸ¥å¯åŠ¨é—®é¢˜]
    Q1 -->|æ˜¯| Q2{ç›¸æœºè¿æ¥å—?}
    Q2 -->|å¦| B[æ£€æŸ¥ç›¸æœºé—®é¢˜]
    Q2 -->|æ˜¯| Q3{æ£€æµ‹æ­£å¸¸å—?}
    Q3 -->|å¦| C[æ£€æŸ¥æ£€æµ‹é—®é¢˜]
    Q3 -->|æ˜¯| Q4{é€šä¿¡æ­£å¸¸å—?}
    Q4 -->|å¦| D[æ£€æŸ¥é€šä¿¡é—®é¢˜]
    Q4 -->|æ˜¯| Q5{æ€§èƒ½æ»¡æ„å—?}
    Q5 -->|å¦| E[æ£€æŸ¥æ€§èƒ½é—®é¢˜]
    Q5 -->|æ˜¯| End[ç³»ç»Ÿæ­£å¸¸]
```

### å¥åº·æ£€æŸ¥å‘½ä»¤

```bash
# 1. æ£€æŸ¥ç³»ç»Ÿè¿›ç¨‹
ps aux | grep python | grep main.py

# 2. æ£€æŸ¥ç«¯å£å ç”¨
netstat -tuln | grep 8888    # TCPç«¯å£
netstat -tuln | grep 1883    # MQTTç«¯å£

# 3. æ£€æŸ¥æ—¥å¿—
tail -f logs/VisionCorePro_$(date +%Y-%m-%d).log

# 4. æ£€æŸ¥ç›¸æœºè¿é€šæ€§
ping 192.168.2.99
telnet 192.168.2.99 2122

# 5. æµ‹è¯•TCPè¿æ¥
python tests/test_tcp_client.py
```

---

## å¯åŠ¨é—®é¢˜

### é—®é¢˜1: ç³»ç»Ÿæ— æ³•å¯åŠ¨

#### ç—‡çŠ¶
```bash
$ python -m app.main
Traceback (most recent call last):
  File "app/main.py", line 18, in <module>
    from app.bootstrap import build_app
ModuleNotFoundError: No module named 'cv2'
```

#### åŸå› 
Pythonä¾èµ–æœªå®‰è£…æˆ–è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. ç¡®è®¤è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
# Linux/Mac:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# 2. é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. éªŒè¯æ ¸å¿ƒä¾èµ–
python -c "import cv2, numpy, ultralytics, yaml; print('âœ“ ä¾èµ–æ­£å¸¸')"

# 4. å¦‚æœä»å¤±è´¥ï¼Œé‡å»ºè™šæ‹Ÿç¯å¢ƒ
rm -rf venv
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

### é—®é¢˜2: é…ç½®æ–‡ä»¶é”™è¯¯

#### ç—‡çŠ¶
```
ERROR: é…ç½®æ–‡ä»¶è§£æå¤±è´¥
yaml.scanner.ScannerError: mapping values are not allowed here
```

#### åŸå› 
YAMLè¯­æ³•é”™è¯¯ï¼ˆç¼©è¿›ã€å†’å·ç­‰ï¼‰

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. éªŒè¯YAMLè¯­æ³•
python -c "import yaml; yaml.safe_load(open('configs/config.yaml'))"

# 2. å¸¸è§YAMLé”™è¯¯
# âŒ é”™è¯¯ï¼šç¼©è¿›ä½¿ç”¨Tab
camera:
	ip: 192.168.2.99

# âœ… æ­£ç¡®ï¼šä½¿ç”¨2ä¸ªç©ºæ ¼
camera:
  ip: 192.168.2.99

# âŒ é”™è¯¯ï¼šå†’å·åæ— ç©ºæ ¼
camera:
  ip:192.168.2.99

# âœ… æ­£ç¡®ï¼šå†’å·åæœ‰ç©ºæ ¼
camera:
  ip: 192.168.2.99

# 3. æ¢å¤å¤‡ä»½é…ç½®
cp configs/config_backup/config.yaml.backup_YYYYMMDD_HHMMSS configs/config.yaml
```

---

### é—®é¢˜3: æ¨¡å‹æ–‡ä»¶æ‰¾ä¸åˆ°

#### ç—‡çŠ¶
```
ERROR: æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨: models/seasoning_11.18.pt
```

#### åŸå› 
æ¨¡å‹æ–‡ä»¶è·¯å¾„é”™è¯¯æˆ–æ–‡ä»¶ç¼ºå¤±

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶
ls -lh models/

# 2. ç¡®è®¤é…ç½®æ–‡ä»¶ä¸­çš„è·¯å¾„
grep "path:" configs/config.yaml

# 3. å¦‚æœæ¨¡å‹ä¸å­˜åœ¨ï¼Œæ”¾ç½®æ­£ç¡®çš„æ¨¡å‹æ–‡ä»¶
# PCå¹³å°ï¼š.ptæ–‡ä»¶
# RK3588å¹³å°ï¼š.rknnæ–‡ä»¶

# 4. æ›´æ–°é…ç½®æ–‡ä»¶
nano configs/config.yaml
# ä¿®æ”¹ model.path ä¸ºå®é™…æ–‡ä»¶è·¯å¾„
```

---

### é—®é¢˜4: ç«¯å£è¢«å ç”¨

#### ç—‡çŠ¶
```
ERROR: TCPæœåŠ¡å™¨å¯åŠ¨å¤±è´¥: [Errno 98] Address already in use
```

#### åŸå› 
ç«¯å£8888å·²è¢«å…¶ä»–ç¨‹åºå ç”¨

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
# Linux:
lsof -i :8888
sudo netstat -tulpn | grep 8888

# Windows:
netstat -ano | findstr :8888

# 2. æ€æ­»å ç”¨è¿›ç¨‹
# Linux:
sudo kill -9 <PID>

# Windows:
taskkill /PID <PID> /F

# 3. æˆ–è€…ä¿®æ”¹é…ç½®ä½¿ç”¨å…¶ä»–ç«¯å£
nano configs/config.yaml
# DetectionServer.port: 8889

# 4. ç¡®è®¤ç«¯å£ç©ºé—²
telnet localhost 8888
# åº”è¯¥æ˜¾ç¤º "Connection refused"ï¼ˆè¡¨ç¤ºç«¯å£ç©ºé—²ï¼‰
```

---

## ç›¸æœºé—®é¢˜

### é—®é¢˜5: ç›¸æœºæ— æ³•è¿æ¥

#### ç—‡çŠ¶
```
ERROR: ç›¸æœºè¿æ¥å¤±è´¥ | 192.168.2.99:2122 | timeout
```

#### åŸå› åˆ†æ
1. ç½‘ç»œä¸é€š
2. ç›¸æœºç”µæºæœªå¼€
3. IPåœ°å€é…ç½®é”™è¯¯
4. é˜²ç«å¢™é˜»æ­¢

#### æ’æŸ¥æ­¥éª¤
```bash
# æ­¥éª¤1: æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
ping 192.168.2.99
# âœ“ å¦‚æœèƒ½pingé€šï¼Œè¯´æ˜ç½‘ç»œæ­£å¸¸
# âœ— å¦‚æœä¸é€šï¼Œæ£€æŸ¥ç½‘çº¿ã€IPè®¾ç½®

# æ­¥éª¤2: æ£€æŸ¥ç«¯å£å¯è¾¾æ€§
telnet 192.168.2.99 2122
# âœ“ å¦‚æœè¿æ¥æˆåŠŸï¼Œè¯´æ˜ç›¸æœºæœåŠ¡æ­£å¸¸
# âœ— å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥ç›¸æœºç”µæºã€æœåŠ¡çŠ¶æ€

# æ­¥éª¤3: æ£€æŸ¥PCç½‘å¡é…ç½®
ifconfig    # Linux
ipconfig    # Windows
# ç¡®è®¤PCçš„IPä¸ç›¸æœºåœ¨åŒä¸€ç½‘æ®µ
# ç›¸æœº: 192.168.2.99
# PCåº”è¯¥: 192.168.2.x (xâ‰ 99)

# æ­¥éª¤4: æ£€æŸ¥é…ç½®æ–‡ä»¶
grep "ip:" configs/config.yaml
# ç¡®è®¤IPåœ°å€æ­£ç¡®

# æ­¥éª¤5: ä¸´æ—¶ç¦ç”¨é˜²ç«å¢™æµ‹è¯•
# Linux:
sudo ufw disable

# Windows:
# æ§åˆ¶é¢æ¿ -> Windows Defenderé˜²ç«å¢™ -> å…³é—­
```

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ1: ç½‘ç»œé…ç½®**
```bash
# Linuxè®¾ç½®é™æ€IP
sudo nano /etc/network/interfaces

# æ·»åŠ :
auto eth0
iface eth0 inet static
    address 192.168.2.100
    netmask 255.255.255.0

# é‡å¯ç½‘ç»œ
sudo systemctl restart networking
```

**æ–¹æ¡ˆ2: é˜²ç«å¢™è§„åˆ™**
```bash
# å…è®¸ç›¸æœºç«¯å£
sudo ufw allow from 192.168.2.99 to any port 2122
```

**æ–¹æ¡ˆ3: ä½¿ç”¨C++åç«¯**
```yaml
# configs/config.yaml
camera:
  backend: cpp    # C++å®ç°æœ‰æ—¶æ›´ç¨³å®š
```

---

### é—®é¢˜6: ç›¸æœºé¢‘ç¹æ–­çº¿

#### ç—‡çŠ¶
```
WARNING: ç›¸æœºè¿æ¥æ–­å¼€ï¼Œæ­£åœ¨é‡è¿...
INFO: ç›¸æœºé‡è¿æˆåŠŸ
WARNING: ç›¸æœºè¿æ¥æ–­å¼€ï¼Œæ­£åœ¨é‡è¿...
```

#### åŸå› 
1. ç½‘çº¿è´¨é‡å·®
2. ç½‘ç»œä¸ç¨³å®š
3. ç›¸æœºè¿‡çƒ­
4. ç”µæºä¸ç¨³å®š

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. æ£€æŸ¥ç½‘çº¿
# - æ›´æ¢è´¨é‡å¥½çš„è¶…äº”ç±»/å…­ç±»ç½‘çº¿
# - ç¡®ä¿ç½‘çº¿é•¿åº¦<100ç±³
# - æ£€æŸ¥æ°´æ™¶å¤´æ˜¯å¦æ¾åŠ¨

# 2. æ£€æŸ¥ç½‘ç»œè®¾å¤‡
# - ä½¿ç”¨ç›´è¿ï¼ˆä¸ç»è¿‡äº¤æ¢æœºï¼‰
# - æ›´æ¢äº¤æ¢æœº
# - ä½¿ç”¨åƒå…†äº¤æ¢æœº

# 3. æ£€æŸ¥ç›¸æœºçŠ¶æ€
# - ç¡®è®¤ç›¸æœºä¸è¿‡çƒ­ï¼ˆé£æ‰‡æ­£å¸¸ï¼‰
# - æ£€æŸ¥ç›¸æœºç”µæºä¾›ç”µç¨³å®š

# 4. å¢åŠ è¶…æ—¶æ—¶é—´
nano configs/config.yaml
camera:
  connection:
    timeout: 30    # å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
```

---

### é—®é¢˜7: ç›¸æœºå–å›¾æ…¢

#### ç—‡çŠ¶
```
INFO: ç›¸æœºå–å›¾è€—æ—¶: 850ms
```

#### åŸå› 
1. ä½¿ç”¨Pythonåç«¯
2. ç½‘ç»œå»¶è¿Ÿé«˜
3. ç›¸æœºé…ç½®ä¸å½“

#### è§£å†³æ–¹æ¡ˆ
```yaml
# 1. å¯ç”¨C++åç«¯ï¼ˆæ˜¾è‘—æé€Ÿï¼‰
camera:
  backend: cpp

# 2. ä½¿ç”¨å•æ­¥æ¨¡å¼
camera:
  mode:
    useSingleStep: true

# 3. å‡å°‘å–å›¾å†…å®¹
# åœ¨ä»£ç ä¸­åªè·å–å¿…è¦çš„æ•°æ®
frame = camera.get_frame(
    depth=True,       # å¿…é¡»
    intensity=True,   # å¿…é¡»
    camera_params=False  # éå¿…é¡»æ—¶å…³é—­
)
```

---

## æ£€æµ‹é—®é¢˜

### é—®é¢˜8: æ£€æµ‹ç»“æœä¸å‡†ç¡®

#### ç—‡çŠ¶
- æ¼æ£€ï¼šæ˜æ˜æœ‰ç›®æ ‡ä½†æœªæ£€æµ‹åˆ°
- è¯¯æ£€ï¼šæ£€æµ‹åˆ°ä¸å­˜åœ¨çš„ç›®æ ‡
- ä½ç½®åç§»ï¼šæ£€æµ‹ä½ç½®ä¸å®é™…ä½ç½®åå·®å¤§

#### åŸå› åˆ†æ

**æ¼æ£€åŸå› **:
1. ç½®ä¿¡åº¦é˜ˆå€¼å¤ªé«˜
2. ç›®æ ‡å°ºå¯¸å¤ªå°
3. å…‰ç…§æ¡ä»¶å·®
4. æ¨¡å‹æœªè®­ç»ƒè¯¥åœºæ™¯

**è¯¯æ£€åŸå› **:
1. ç½®ä¿¡åº¦é˜ˆå€¼å¤ªä½
2. èƒŒæ™¯å¹²æ‰°
3. æ¨¡å‹è¿‡æ‹Ÿåˆ

**ä½ç½®åç§»åŸå› **:
1. æ ‡å®šä¸å‡†ç¡®
2. ç›¸æœºç•¸å˜
3. æ·±åº¦æ•°æ®ä¸å‡†

#### è§£å†³æ–¹æ¡ˆ

**è°ƒæ•´æ£€æµ‹å‚æ•°**:
```yaml
# configs/config.yaml
model:
  conf_threshold: 0.5    # é™ä½é˜ˆå€¼å‡å°‘æ¼æ£€ï¼Œå‡é«˜é˜ˆå€¼å‡å°‘è¯¯æ£€
  nms_threshold: 0.45    # NMSé˜ˆå€¼ï¼Œæ§åˆ¶é‡å æ¡†

roi:
  minArea: 2500          # æœ€å°é¢ç§¯ï¼Œè¿‡æ»¤å°ç›®æ ‡
  depthThreshold: 700    # æ·±åº¦é˜ˆå€¼ï¼Œè¿‡æ»¤è¿‡æ·±ç›®æ ‡
```

**ä¼˜åŒ–ROI**:
```yaml
roi:
  regions:
    - name: work_area
      width: 150
      height: 100
      offsetx: 50      # è°ƒæ•´ROIä½ç½®
      offsety: 40
      priority: 1
```

**æµ‹è¯•ä¸åŒå‚æ•°**:
```python
# æµ‹è¯•è„šæœ¬
import json

test_configs = [
    {"conf": 0.5, "nms": 0.4},
    {"conf": 0.6, "nms": 0.45},
    {"conf": 0.7, "nms": 0.5},
]

for cfg in test_configs:
    # æ›´æ–°é…ç½®
    update_config(cfg)
    
    # æµ‹è¯•æ£€æµ‹
    result = mqtt_client.model_test()
    
    # è®°å½•ç»“æœ
    print(f"conf={cfg['conf']}, nms={cfg['nms']}")
    print(f"  æ£€æµ‹æ•°é‡: {result['data']['detection_count']}")
```

---

### é—®é¢˜9: æ£€æµ‹é€Ÿåº¦æ…¢

#### ç—‡çŠ¶
```
INFO: æ¨ç†è€—æ—¶: 850ms
WARNING: æ£€æµ‹æ€»æ—¶é—´è¶…è¿‡1ç§’
```

#### åŸå› 
1. ä½¿ç”¨CPUæ¨ç†ï¼ˆPCï¼‰
2. ä½¿ç”¨Pythonåç«¯ï¼ˆRKNNï¼‰
3. å›¾åƒåˆ†è¾¨ç‡å¤ªé«˜
4. æ¨¡å‹å¤ªå¤§

#### è§£å†³æ–¹æ¡ˆ

**PCå¹³å°ä¼˜åŒ–**:
```bash
# 1. å¯ç”¨GPUåŠ é€Ÿ
# ç¡®è®¤CUDAå¯ç”¨
python -c "import torch; print(torch.cuda.is_available())"

# 2. å¦‚æœCUDAä¸å¯ç”¨ï¼Œå®‰è£…
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118

# 3. éªŒè¯GPUåŠ é€Ÿç”Ÿæ•ˆ
# æŸ¥çœ‹æ—¥å¿—åº”è¯¥æ˜¾ç¤º: "Using device: cuda:0"
```

**RK3588å¹³å°ä¼˜åŒ–**:
```yaml
# 1. å¯ç”¨C++åç«¯
model:
  backend: rknn
  use_cpp: true    # ä½¿ç”¨C++å®ç°çš„RKNNæ¨ç†

# 2. ç¼–è¯‘C++æ¨¡å—
cd services/cpp
./build.sh

# 3. éªŒè¯C++æ¨¡å—åŠ è½½
python -c "import vc_detection_cpp; print('âœ“ C++æ£€æµ‹æ¨¡å—å¯ç”¨')"
```

**é€šç”¨ä¼˜åŒ–**:
```yaml
# 1. ä½¿ç”¨æ›´å°çš„æ¨¡å‹
model:
  model_name: yolov8n-seg.pt    # n: nanoï¼ˆæœ€å¿«ï¼‰
  # model_name: yolov8s-seg.pt  # s: small
  # model_name: yolov8m-seg.pt  # m: medium

# 2. é™ä½è¾“å…¥åˆ†è¾¨ç‡ï¼ˆå¦‚æœæ¨¡å‹æ”¯æŒï¼‰
model:
  input_size: 320    # é»˜è®¤640
```

---

### é—®é¢˜10: æ£€æµ‹å™¨å´©æºƒ

#### ç—‡çŠ¶
```
ERROR: æ£€æµ‹å™¨å¼‚å¸¸é€€å‡º
Segmentation fault (core dumped)
```

#### åŸå› 
1. C++æ¨¡å—ç‰ˆæœ¬ä¸åŒ¹é…
2. å†…å­˜ä¸è¶³
3. RKNNé©±åŠ¨é—®é¢˜

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. åˆ‡æ¢åˆ°Pythonåç«¯
nano configs/config.yaml
model:
  use_cpp: false    # ç¦ç”¨C++åç«¯

# 2. æ£€æŸ¥å†…å­˜
free -h
# å¦‚æœå¯ç”¨å†…å­˜<1GBï¼Œè€ƒè™‘ï¼š
# - å…³é—­å…¶ä»–ç¨‹åº
# - å¢åŠ swap
# - ä½¿ç”¨æ›´å°çš„æ¨¡å‹

# 3. é‡æ–°ç¼–è¯‘C++æ¨¡å—
cd services/cpp
./clean.sh
./build.sh

# 4. RK3588å¹³å°ï¼šæ£€æŸ¥NPUé©±åŠ¨
ls /dev/rknpu*
dmesg | grep rknpu
```

---

## é€šä¿¡é—®é¢˜

### é—®é¢˜11: TCPå®¢æˆ·ç«¯æ— æ³•è¿æ¥

#### ç—‡çŠ¶
```python
socket.error: [Errno 111] Connection refused
```

#### æ’æŸ¥æ­¥éª¤
```bash
# 1. ç¡®è®¤TCPæœåŠ¡å™¨å·²å¯åŠ¨
grep "TCP æœåŠ¡å™¨å¯åŠ¨" logs/VisionCorePro_*.log

# 2. ç¡®è®¤ç›‘å¬åœ°å€å’Œç«¯å£
netstat -tuln | grep 8888
# åº”è¯¥æ˜¾ç¤º: 0.0.0.0:8888 æˆ– 192.168.2.126:8888

# 3. æµ‹è¯•æœ¬åœ°è¿æ¥
telnet localhost 8888
# å¦‚æœæˆåŠŸï¼Œè¯´æ˜æœåŠ¡å™¨æ­£å¸¸

# 4. æµ‹è¯•è¿œç¨‹è¿æ¥
telnet 192.168.2.126 8888
# å¦‚æœå¤±è´¥ï¼Œæ£€æŸ¥é˜²ç«å¢™

# 5. æ£€æŸ¥é…ç½®
grep "DetectionServer" configs/config.yaml -A 5
```

#### è§£å†³æ–¹æ¡ˆ
```yaml
# ç¡®ä¿ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
DetectionServer:
  enable: true
  host: 0.0.0.0    # ä¸è¦ç”¨127.0.0.1
  port: 8888
```

---

### é—®é¢˜12: MQTTè¿æ¥å¤±è´¥

#### ç—‡çŠ¶
```
ERROR: MQTTè¿æ¥å¤±è´¥: Connection Refused
```

#### åŸå› 
1. MQTT brokeræœªè¿è¡Œ
2. é…ç½®é”™è¯¯
3. ç½‘ç»œä¸é€š

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. ç¡®è®¤MQTT brokerè¿è¡Œ
# å¦‚æœä½¿ç”¨Mosquitto:
sudo systemctl status mosquitto

# å¦‚æœæœªå®‰è£…:
sudo apt install mosquitto mosquitto-clients

# 2. æµ‹è¯•MQTTè¿æ¥
mosquitto_sub -h 192.168.2.126 -t test -v

# 3. æ£€æŸ¥é…ç½®
grep "mqtt:" configs/config.yaml -A 10

# 4. MQTTæ˜¯éå…³é”®ç»„ä»¶ï¼Œå¯ä»¥ç¦ç”¨
mqtt:
  enable: false
```

---

### é—®é¢˜13: TCPå“åº”è¶…æ—¶

#### ç—‡çŠ¶
```python
socket.timeout: timed out
```

#### åŸå› 
1. ç³»ç»Ÿè´Ÿè½½é«˜
2. æ£€æµ‹è€—æ—¶é•¿
3. ç½‘ç»œå»¶è¿Ÿé«˜

#### è§£å†³æ–¹æ¡ˆ
```python
# 1. å¢åŠ å®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´
client = socket.socket()
client.settimeout(10)    # å¢åŠ åˆ°10ç§’

# 2. æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
top    # æŸ¥çœ‹CPUã€å†…å­˜ä½¿ç”¨ç‡

# 3. ä¼˜åŒ–æ£€æµ‹æ€§èƒ½ï¼ˆè§é—®é¢˜9ï¼‰

# 4. æ£€æŸ¥é®æŒ¡æ£€æµ‹
# å¦‚æœé¢‘ç¹è¿”å› -1,0,0,0,0ï¼Œè°ƒæ•´é®æŒ¡æ£€æµ‹å‚æ•°
roi:
  occlusion:
    intervalThreshold: 1000    # å¢åŠ é˜ˆå€¼
    ignoreCount: 2             # å‡å°‘å¿½ç•¥æ¬¡æ•°
```

---

## æ€§èƒ½é—®é¢˜

### é—®é¢˜14: ç³»ç»Ÿæ•´ä½“å“åº”æ…¢

#### ç—‡çŠ¶
- TCPå“åº”æ—¶é—´>500ms
- CPUä½¿ç”¨ç‡æŒç»­>80%
- å†…å­˜ä½¿ç”¨ç‡æŒç»­>90%

#### æ€§èƒ½åˆ†æ
```bash
# 1. ç³»ç»Ÿèµ„æºç›‘æ§
top -p $(pgrep -f "python.*main.py")

# 2. è¯¦ç»†æ€§èƒ½åˆ†æ
python -m cProfile -o profile.stats app/main.py
# Ctrl+C åœæ­¢ååˆ†æ
python -c "import pstats; p=pstats.Stats('profile.stats'); p.sort_stats('cumulative'); p.print_stats(20)"

# 3. å†…å­˜åˆ†æ
pip install memory_profiler
python -m memory_profiler app/main.py
```

#### ä¼˜åŒ–æ–¹æ¡ˆ

**CPUä¼˜åŒ–**:
```yaml
# 1. å¯ç”¨GPU/NPUåŠ é€Ÿ
model:
  backend: auto    # PCè‡ªåŠ¨é€‰æ‹©GPU

# 2. å‡å°‘æ£€æŸ¥é—´éš”
board_mode:
  monitoring:
    check_interval: 60    # ä»30ç§’å¢åŠ åˆ°60ç§’

# 3. ç¦ç”¨éå¿…è¦åŠŸèƒ½
sftp:
  enable: false    # ç¦ç”¨SFTP
mqtt:
  enable: false    # ç¦ç”¨MQTTï¼ˆå¦‚æœä¸éœ€è¦ï¼‰
```

**å†…å­˜ä¼˜åŒ–**:
```python
# 1. å®šæœŸæ¸…ç†ç¼“å­˜ï¼ˆåœ¨ä»£ç ä¸­æ·»åŠ ï¼‰
import gc
gc.collect()

# 2. ä½¿ç”¨æ›´å°çš„æ¨¡å‹

# 3. é™åˆ¶å›¾åƒç¼“å­˜
```

**I/Oä¼˜åŒ–**:
```yaml
# 1. ä½¿ç”¨SSDå­˜å‚¨æ—¥å¿—
logging:
  file:
    path: /mnt/ssd/logs    # å¦‚æœæœ‰SSD

# 2. å‡å°‘æ—¥å¿—å†™å…¥
logging:
  level: WARNING    # ä»INFOæ”¹ä¸ºWARNING
```

---

### é—®é¢˜15: å†…å­˜æ³„æ¼

#### ç—‡çŠ¶
```bash
# å†…å­˜ä½¿ç”¨æŒç»­å¢é•¿
$ free -h
              total        used        free
Mem:           7.8G        6.5G        200M    # å¹¶æŒç»­å¢é•¿
```

#### æ’æŸ¥æ–¹æ³•
```python
# ä½¿ç”¨tracemallocè¿½è¸ªå†…å­˜
import tracemalloc

tracemalloc.start()

# è¿è¡Œä¸€æ®µæ—¶é—´å
snapshot = tracemalloc.take_snapshot()
top_stats = snapshot.statistics('lineno')

for stat in top_stats[:10]:
    print(stat)
```

#### è§£å†³æ–¹æ¡ˆ
```bash
# 1. é‡å¯æœåŠ¡ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰
sudo systemctl restart visioncore

# 2. å®šæœŸé‡å¯ï¼ˆcronä»»åŠ¡ï¼‰
crontab -e
# æ·»åŠ ï¼šæ¯å¤©å‡Œæ™¨3ç‚¹é‡å¯
0 3 * * * systemctl restart visioncore

# 3. ä½¿ç”¨è¿›ç¨‹ç›‘æ§å·¥å…·
pip install supervisor
# é…ç½®è‡ªåŠ¨é‡å¯ç­–ç•¥
```

---

## æ ‡å®šé—®é¢˜

### é—®é¢˜16: æ ‡å®šRMSEè¿‡å¤§

**å‚è€ƒ**: [æ ‡å®šæ“ä½œæ‰‹å†Œ - å¸¸è§é—®é¢˜](./æ ‡å®šæ“ä½œæ‰‹å†Œ.md#å¸¸è§é—®é¢˜)

---

### é—®é¢˜17: æ ‡å®šåæŠ“å–åå·®

**å‚è€ƒ**: [æ ‡å®šæ“ä½œæ‰‹å†Œ - Q3](./æ ‡å®šæ“ä½œæ‰‹å†Œ.md#q3-æ ‡å®šåå®é™…æŠ“å–åå·®å¤§)

---

## æ—¥å¿—åˆ†æ

### æ—¥å¿—ä½ç½®

```bash
# ä¸»æ—¥å¿—æ–‡ä»¶
logs/VisionCorePro_YYYY-MM-DD.log

# æ—§æ—¥å¿—ï¼ˆè‡ªåŠ¨è½®è½¬ï¼‰
logs/VisionCorePro_YYYY-MM-DD.log.1
logs/VisionCorePro_YYYY-MM-DD.log.2
```

### æ—¥å¿—çº§åˆ«

| çº§åˆ« | å«ä¹‰ | ç¤ºä¾‹ |
|------|------|------|
| **DEBUG** | è°ƒè¯•ä¿¡æ¯ | `DEBUG: è¿›å…¥å‡½æ•° detect()` |
| **INFO** | æ­£å¸¸ä¿¡æ¯ | `INFO: TCPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ` |
| **WARNING** | è­¦å‘Š | `WARNING: ç›¸æœºè¿æ¥æ–­å¼€ï¼Œæ­£åœ¨é‡è¿` |
| **ERROR** | é”™è¯¯ | `ERROR: æ£€æµ‹å™¨åŠ è½½å¤±è´¥` |
| **CRITICAL** | ä¸¥é‡é”™è¯¯ | `CRITICAL: ç³»ç»Ÿæ— æ³•å¯åŠ¨` |

### å¸¸ç”¨æ—¥å¿—åˆ†æå‘½ä»¤

```bash
# 1. å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/VisionCorePro_$(date +%Y-%m-%d).log

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" logs/VisionCorePro_*.log

# 3. æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
grep "ERROR" logs/VisionCorePro_*.log | tail -20

# 4. ç»Ÿè®¡é”™è¯¯ç±»å‹
grep "ERROR" logs/VisionCorePro_*.log | cut -d':' -f4 | sort | uniq -c

# 5. æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—
grep "2025-11-26 14:" logs/VisionCorePro_2025-11-26.log

# 6. æŸ¥çœ‹æ£€æµ‹æ€§èƒ½
grep "æ¨ç†è€—æ—¶" logs/VisionCorePro_*.log | tail -50
```

### å…³é”®æ—¥å¿—æ ‡è¯†

**å¯åŠ¨æˆåŠŸæ ‡è¯†**:
```
INFO: VisionCorePro starting...
INFO: âœ“ TCPæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
INFO: âœ“ ç›¸æœºè¿æ¥æˆåŠŸ
INFO: âœ“ æ£€æµ‹å™¨åŠ è½½æˆåŠŸ
INFO: âœ“ æœåŠ¡å·²å¯åŠ¨ï¼Œç›‘æ§å™¨æ­£åœ¨è¿è¡Œ
```

**ç›¸æœºé—®é¢˜æ ‡è¯†**:
```
ERROR: ç›¸æœºè¿æ¥å¤±è´¥
WARNING: ç›¸æœºè¿æ¥æ–­å¼€
ERROR: å–å›¾å¤±è´¥
WARNING: æ£€æµ‹åˆ°æ—§å¸§å¤ç”¨
```

**æ£€æµ‹é—®é¢˜æ ‡è¯†**:
```
ERROR: æ£€æµ‹å™¨æœªå°±ç»ª
WARNING: æœªæ£€æµ‹åˆ°ç›®æ ‡
ERROR: æ¨ç†å¤±è´¥
WARNING: ROIè¿‡æ»¤åæ— ç›®æ ‡
```

**æ€§èƒ½é—®é¢˜æ ‡è¯†**:
```
WARNING: æ¨ç†è€—æ—¶è¿‡é•¿: 850ms
WARNING: TCPå¤„ç†è¶…æ—¶
ERROR: ç³»ç»Ÿå†…å­˜ä¸è¶³
```

---

## ç³»ç»Ÿæ¢å¤

### å®Œå…¨é‡ç½®

```bash
# 1. åœæ­¢æœåŠ¡
sudo systemctl stop visioncore

# 2. å¤‡ä»½æ•°æ®
cp -r configs configs.backup.$(date +%Y%m%d)
cp -r logs logs.backup.$(date +%Y%m%d)

# 3. æ¢å¤é»˜è®¤é…ç½®
git checkout configs/config.yaml

# 4. æ¸…ç†æ—¥å¿—
rm logs/*.log

# 5. æ¸…ç†ç¼“å­˜
find . -type d -name "__pycache__" -exec rm -r {} +

# 6. é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt --force-reinstall

# 7. é‡å¯æœåŠ¡
sudo systemctl start visioncore
```

### é…ç½®æ¢å¤

```bash
# æ–¹æ³•1: ä»å¤‡ä»½æ¢å¤
ls configs/config_backup/
cp configs/config_backup/config.yaml.backup_YYYYMMDD_HHMMSS configs/config.yaml

# æ–¹æ³•2: ä»Gitæ¢å¤
git checkout configs/config.yaml

# æ–¹æ³•3: ä½¿ç”¨æœ€å°é…ç½®
cat > configs/config.yaml << 'EOF'
logging:
  enable: true
  level: INFO

camera:
  enable: true
  connection:
    ip: 192.168.2.99
    port: 2122

model:
  backend: auto
  path: models/seasoning_11.18.pt
  conf_threshold: 0.7

DetectionServer:
  enable: true
  host: 0.0.0.0
  port: 8888

mqtt:
  enable: false

sftp:
  enable: false

roi:
  enable: true
  minArea: 3000
EOF
```

### æ•°æ®æ¢å¤

```bash
# 1. æ¢å¤æ ‡å®šçŸ©é˜µ
ls configs/transformation_matrix_backup/
cp configs/transformation_matrix_backup/transformation_matrix.json.backup_YYYYMMDD_HHMMSS \
   configs/transformation_matrix.json

# 2. æ¢å¤æ¨¡å‹æ–‡ä»¶
# ä»å¤‡ä»½ä½ç½®å¤åˆ¶æ¨¡å‹æ–‡ä»¶
cp /backup/models/*.pt models/
cp /backup/models/*.rknn models/
```

---

## è”ç³»æ”¯æŒ

### æäº¤é—®é¢˜å‰çš„å‡†å¤‡

1. **æ”¶é›†ç³»ç»Ÿä¿¡æ¯**:
```bash
# åˆ›å»ºè¯Šæ–­æŠ¥å‘Š
cat > diagnostic_report.txt << EOF
# ç³»ç»Ÿä¿¡æ¯
OS: $(uname -a)
Python: $(python --version)
VisionCore: v1.3.0

# ç¡¬ä»¶ä¿¡æ¯
CPU: $(lscpu | grep "Model name")
Memory: $(free -h | grep Mem)
GPU: $(nvidia-smi 2>/dev/null || echo "N/A")

# é…ç½®ä¿¡æ¯
$(cat configs/config.yaml)

# æœ€è¿‘é”™è¯¯æ—¥å¿—
$(grep "ERROR\|CRITICAL" logs/VisionCorePro_*.log | tail -50)
EOF

cat diagnostic_report.txt
```

2. **é—®é¢˜æè¿°æ¨¡æ¿**:
```
é—®é¢˜æ ‡é¢˜: [ç®€çŸ­æè¿°é—®é¢˜]

ç³»ç»Ÿç¯å¢ƒ:
- æ“ä½œç³»ç»Ÿ: Windows 10 / Ubuntu 20.04 / RK3588
- Pythonç‰ˆæœ¬: 3.9.x
- VisionCoreç‰ˆæœ¬: v1.3.0

é—®é¢˜ç°è±¡:
[è¯¦ç»†æè¿°é—®é¢˜ï¼ŒåŒ…æ‹¬é”™è¯¯ä¿¡æ¯ã€æˆªå›¾ç­‰]

å¤ç°æ­¥éª¤:
1. æ­¥éª¤1
2. æ­¥éª¤2
3. ...

å·²å°è¯•çš„è§£å†³æ–¹æ³•:
- æ–¹æ³•1: ç»“æœxxx
- æ–¹æ³•2: ç»“æœxxx

é™„ä»¶:
- æ—¥å¿—æ–‡ä»¶: logs/VisionCorePro_YYYY-MM-DD.log
- é…ç½®æ–‡ä»¶: configs/config.yaml
- è¯Šæ–­æŠ¥å‘Š: diagnostic_report.txt
```

### æ”¯æŒæ¸ é“

- **GitHub Issues**: [é¡¹ç›®åœ°å€]/issues
- **é‚®ä»¶æ”¯æŒ**: support@example.com
- **æŠ€æœ¯æ–‡æ¡£**: [æ–‡æ¡£ç«™ç‚¹]

---

## é™„å½•ï¼šå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### ç³»ç»Ÿç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start visioncore

# åœæ­¢æœåŠ¡
sudo systemctl stop visioncore

# é‡å¯æœåŠ¡
sudo systemctl restart visioncore

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status visioncore

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u visioncore -f
```

### ç½‘ç»œè¯Šæ–­

```bash
# æµ‹è¯•ç›¸æœºè¿é€šæ€§
ping -c 4 192.168.2.99
telnet 192.168.2.99 2122

# æµ‹è¯•TCPæœåŠ¡å™¨
telnet localhost 8888
nc -zv localhost 8888

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tuln | grep 8888
lsof -i :8888

# æŠ“åŒ…åˆ†æ
sudo tcpdump -i eth0 host 192.168.2.99 -w camera.pcap
```

### è¿›ç¨‹ç®¡ç†

```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep python | grep main.py

# æŸ¥çœ‹è¿›ç¨‹è¯¦æƒ…
pgrep -f "python.*main.py"
ps -p <PID> -o pid,ppid,cmd,%mem,%cpu,etime

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
pkill -f "python.*main.py"
```

### æ€§èƒ½ç›‘æ§

```bash
# CPUå’Œå†…å­˜
top -p <PID>
htop -p <PID>

# ç£ç›˜I/O
iotop -p <PID>

# ç½‘ç»œI/O
iftop -i eth0
nethogs eth0

# GPUä½¿ç”¨ç‡ï¼ˆNVIDIAï¼‰
watch -n 1 nvidia-smi
```

---

<div align="center">

**VisionCore Enterprise Edition**  
*ä¸“ä¸šå·¥ä¸šè§†è§‰æ£€æµ‹ç³»ç»Ÿ*

é‡åˆ°é—®é¢˜ï¼Ÿå…ˆæŸ¥é˜…æœ¬æ‰‹å†Œ | æ— æ³•è§£å†³ï¼Ÿè”ç³»æŠ€æœ¯æ”¯æŒ

è¿”å› [ç³»ç»Ÿå®‰è£…é…ç½®æ‰‹å†Œ](./ç³»ç»Ÿå®‰è£…é…ç½®æ‰‹å†Œ.md) | [APIæ¥å£ä½¿ç”¨æ‰‹å†Œ](./APIæ¥å£ä½¿ç”¨æ‰‹å†Œ.md) | [æ ‡å®šæ“ä½œæ‰‹å†Œ](./æ ‡å®šæ“ä½œæ‰‹å†Œ.md)

</div>

