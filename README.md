# VisionCore Enterprise Edition

**ä¼ä¸šçº§å·¥ä¸šè§†è§‰æ£€æµ‹ç³»ç»Ÿ** - é«˜æ€§èƒ½ã€æ¨¡å—åŒ–ã€å¯æ‰©å±•

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/)
[![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20Linux-lightgrey.svg)]()

---

## ğŸ“– ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
- [æ ¸å¿ƒæ¨¡å—](#æ ¸å¿ƒæ¨¡å—)
- [æ”¯æŒçš„å‘½ä»¤](#æ”¯æŒçš„å‘½ä»¤)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [æ–‡æ¡£](#æ–‡æ¡£)
- [è®¸å¯è¯](#è®¸å¯è¯)

---

## æ¦‚è¿°

VisionCore Enterprise Edition æ˜¯å¯¹åŸæœ‰ VisionCore ç³»ç»Ÿçš„**å·¥ç¨‹åŒ–é‡æ„ç‰ˆæœ¬**ï¼Œé‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚æ¶æ„ã€æ¨¡å—åŒ–è®¾è®¡ï¼Œä¸“ä¸ºå·¥ä¸šè‡ªåŠ¨åŒ–åœºæ™¯æ‰“é€ çš„é«˜æ€§èƒ½è§†è§‰æ£€æµ‹ç³»ç»Ÿã€‚

### è®¾è®¡ç†å¿µ

- **åˆ†å±‚æ¸…æ™°**: ä¸¥æ ¼çš„é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ï¼Œä¸šåŠ¡é€»è¾‘ä¸åŸºç¡€è®¾æ–½åˆ†ç¦»
- **å¯æµ‹è¯•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **å¯æ‰©å±•æ€§**: å·¥å‚æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- **å¯ç»´æŠ¤æ€§**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–‡æ¡£å®Œå–„ï¼Œæ³¨é‡Šè¯¦ç»†
- **å‘åå…¼å®¹**: ä¿æŒä¸æ—§ç‰ˆ VisionCore çš„åè®®å…¼å®¹

### åº”ç”¨åœºæ™¯

- ğŸ­ **å·¥ä¸šè‡ªåŠ¨åŒ–**: äº§å“ç¼ºé™·æ£€æµ‹ã€åˆ†æ‹£ã€å®šä½
- ğŸ¤– **æœºå™¨äººå¼•å¯¼**: è§†è§‰å®šä½ã€åæ ‡æ ‡å®šã€æŠ“å–å¼•å¯¼
- ğŸ“¦ **ç‰©æµåˆ†æ‹£**: åŒ…è£¹è¯†åˆ«ã€å°ºå¯¸æµ‹é‡ã€ä½ç½®æ£€æµ‹
- ğŸ” **è´¨é‡æ£€éªŒ**: äº§å“å¤–è§‚æ£€æµ‹ã€å°ºå¯¸æµ‹é‡ã€ç¼ºé™·è¯†åˆ«

---

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¥ å¤šç›¸æœºæ”¯æŒ

- **SICK 3Dç›¸æœº**: å®Œæ•´çš„ SICK SDK é›†æˆï¼Œæ”¯æŒæ·±åº¦å›¾åƒå’Œç‚¹äº‘
- **HIK ToFç›¸æœº**: æµ·åº·å¨è§† ToF ç›¸æœºæ”¯æŒ
- **ç»Ÿä¸€æ¥å£**: æŠ½è±¡çš„ç›¸æœºæ¥å£ï¼Œæ˜“äºæ‰©å±•å…¶ä»–ç›¸æœºå“ç‰Œ

### ğŸ§  AI æ£€æµ‹å¼•æ“

- **Ultralytics YOLO**: PCç«¯é«˜æ€§èƒ½æ£€æµ‹ï¼Œæ”¯æŒåˆ†å‰²æ¨¡å‹
- **RKNN æ¨ç†**: åµŒå…¥å¼å¹³å°åŠ é€Ÿï¼ˆRK3588ç­‰ï¼‰
- **å·¥å‚æ¨¡å¼**: è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜åç«¯ï¼ˆPC/RKNN/Autoï¼‰
- **çµæ´»é…ç½®**: ç½®ä¿¡åº¦ã€NMSé˜ˆå€¼å¯è°ƒ

### ğŸ“¡ åŒé€šä¿¡åè®®

- **TCP æœåŠ¡å™¨**: é«˜æ€§èƒ½ `catch` å‘½ä»¤ï¼Œå®æ—¶æ£€æµ‹å“åº”
- **MQTT å®¢æˆ·ç«¯**: è¿œç¨‹å‘½ä»¤æ§åˆ¶ï¼Œç³»ç»ŸçŠ¶æ€ç›‘æ§
- **å‘½ä»¤è·¯ç”±**: ç»Ÿä¸€çš„å‘½ä»¤åˆ†å‘æœºåˆ¶ï¼Œæ˜“äºæ‰©å±•

### ğŸ“ åæ ‡æ ‡å®šç³»ç»Ÿ

- **é»‘å—æ£€æµ‹**: é²æ£’çš„é»‘è‰²æ ‡è®°å—æ£€æµ‹ç®—æ³•ï¼ˆæ›¿ä»£ ArUco/æ£‹ç›˜æ ¼ï¼‰
- **ä¸¤æ­¥å·¥ä½œæµ**: 
  1. `get_calibrat_image` - æ£€æµ‹é»‘å—å¹¶è¿”å›ä¸–ç•Œåæ ‡
  2. `coordinate_calibration` - æ¥æ”¶æœºå™¨äººåæ ‡å¹¶æ‰§è¡Œæ ‡å®š
- **XYä»¿å°„ + Zçº¿æ€§**: åˆ†ç¦»çš„å˜æ¢æ¨¡å‹ï¼Œé€‚åˆå·¥ä¸šåœºæ™¯
- **ç²¾åº¦éªŒè¯**: è‡ªåŠ¨è®¡ç®— RMSEï¼Œè´¨é‡è¯„çº§

### ğŸ”§ ç³»ç»Ÿç®¡ç†

- **å¥åº·ç›‘æ§**: å®æ—¶ç›‘æ§ç›¸æœºã€æ£€æµ‹å™¨ã€é€šä¿¡æ¨¡å—çŠ¶æ€
- **è‡ªåŠ¨é‡å¯**: ç»„ä»¶çº§æ•…éšœè‡ªåŠ¨æ¢å¤æœºåˆ¶
- **æ—¥å¿—ç³»ç»Ÿ**: åˆ†çº§æ—¥å¿—ã€æŒ‰æ—¥è½®è½¬ã€æ§åˆ¶å°+æ–‡ä»¶è¾“å‡º
- **é…ç½®çƒ­é‡è½½**: æ”¯æŒè¿è¡Œæ—¶æ›´æ–°é…ç½®

### ğŸ“ æ–‡ä»¶ä¼ è¾“

- **SFTP å®¢æˆ·ç«¯**: è‡ªåŠ¨ä¸Šä¼ æ£€æµ‹å›¾åƒã€æ ‡å®šå›¾åƒ
- **æ–­çº¿é‡è¿**: è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œä¿è¯ä¼ è¾“å¯é æ€§

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VisionCore EE                             â”‚
â”‚                     Enterprise Edition                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¤–éƒ¨æ¥å£å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TCP Server  â”‚   MQTT Client        â”‚   SFTP Client             â”‚
â”‚  (Port 8888) â”‚   (Commands/Status)  â”‚   (Image Upload)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                      â”‚
       â–¼                  â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‘½ä»¤è·¯ç”±å±‚ (Command Router)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GET_CONFIG | SAVE_CONFIG | GET_IMAGE | MODEL_TEST          â”‚ â”‚
â”‚  â”‚ GET_CALIBRAT_IMAGE | COORDINATE_CALIBRATION | CATCH        â”‚ â”‚
â”‚  â”‚ GET_SYSTEM_STATUS | RESTART | SFTP_TEST                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                      â”‚
       â–¼                  â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ä¸šåŠ¡æœåŠ¡å±‚ (Services)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Camera     â”‚  Detection   â”‚  Calibration   â”‚   System        â”‚
â”‚  - SICK      â”‚  - PC YOLO   â”‚  - Black Block â”‚  - Monitor      â”‚
â”‚  - HIK ToF   â”‚  - RKNN      â”‚  - Calculator  â”‚  - Log Manager  â”‚
â”‚              â”‚  - Coord     â”‚                â”‚  - Initializer  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚                â”‚                 â”‚
       â–¼              â–¼                â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¢†åŸŸæ¨¡å‹å±‚ (Domain)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   Enums          â”‚  â”‚   Models         â”‚                    â”‚
â”‚  â”‚  - Commands      â”‚  â”‚  - MQTTResponse  â”‚                    â”‚
â”‚  â”‚  - MessageType   â”‚  â”‚  - CalibData     â”‚                    â”‚
â”‚  â”‚  - ErrorCode     â”‚  â”‚                  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚                â”‚                 â”‚
       â–¼              â–¼                â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   åŸºç¡€è®¾æ–½å±‚ (Infrastructure)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   SICK SDK       â”‚  â”‚   HIK SDK        â”‚                    â”‚
â”‚  â”‚  - Protocol      â”‚  â”‚  - ToF API       â”‚                    â”‚
â”‚  â”‚  - Streaming     â”‚  â”‚                  â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå›¾

```
å·¥ä½œæµç¨‹: TCP catch å‘½ä»¤

Client                TCP Server        Detection        Camera        Calibration
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”œâ”€ catch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€ é˜²æŠ–æ£€æŸ¥        â”‚               â”‚               â”‚
  â”‚                       â”œâ”€ å¹¶å‘æ§åˆ¶        â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€ get_frame â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚ â—„â”€ è¿”å›å¸§ â”€â”€â”€â”€ â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€ detect â”€â”€â”€â”€â”€â”€â”€â–º â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚ â—„â”€ æ£€æµ‹ç»“æœ â”€â”€â”€â”€â”€ â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€ åæ ‡è½¬æ¢ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚ â—„â”€ æœºå™¨äººåæ ‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚ â—„â”€ "1,x,y,z,angle" â”€â”€ â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚


å·¥ä½œæµç¨‹: åæ ‡æ ‡å®š

Client                MQTT              Calibration      Camera         SFTP
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”œâ”€ get_calibrat_image â”€â–º â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ get_frame â”€â”€â”€â–º â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ detect_blocks â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ calc_world â”€â”€â–º â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ upload_image â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚ â—„â”€ world_coords â”€â”€â”€â”€â”€â”€ â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”œâ”€ (ç”¨æˆ·ç¤ºæ•™æœºå™¨äºº)      â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”œâ”€ coordinate_calibration (world + robot coords)           â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚               â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ fit_affine_xy â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ fit_linear_z  â”‚               â”‚
  â”‚                       â”‚                 â”œâ”€ save_matrix   â”‚               â”‚
  â”‚                       â”‚                 â”‚               â”‚               â”‚
  â”‚ â—„â”€ calibration_result â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚               â”‚               â”‚
  â”‚    (matrix + RMSE)    â”‚                 â”‚               â”‚               â”‚
```

---

## ç›®å½•ç»“æ„

```
VisualCoreEnterpriseEdition/
â”‚
â”œâ”€â”€ app/                                    # åº”ç”¨å…¥å£å±‚
â”‚   â”œâ”€â”€ main.py                            # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ bootstrap.py                       # å¯åŠ¨å¼•å¯¼å’Œä¾èµ–æ³¨å…¥
â”‚
â”œâ”€â”€ domain/                                 # é¢†åŸŸæ¨¡å‹å±‚ï¼ˆä¸šåŠ¡æ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ enums/                             # æšä¸¾å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ commands.py                    # å‘½ä»¤æšä¸¾ï¼ˆVisionCoreCommandsï¼‰
â”‚   â”‚   â””â”€â”€ errors.py                      # é”™è¯¯ç æšä¸¾ï¼ˆTcpErrorCodeï¼‰
â”‚   â””â”€â”€ models/                            # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ mqtt.py                        # MQTTå“åº”æ¨¡å‹ï¼ˆMQTTResponseï¼‰
â”‚
â”œâ”€â”€ services/                               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ camera/                            # ç›¸æœºæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ sick_camera.py                 # SICK 3Dç›¸æœºå®ç°
â”‚   â”‚   â””â”€â”€ hik_tof.py                     # æµ·åº·ToFç›¸æœºå®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ detection/                         # æ£€æµ‹æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ base.py                        # æ£€æµ‹å™¨æ¥å£ï¼ˆæŠ½è±¡åŸºç±»ï¼‰
â”‚   â”‚   â”œâ”€â”€ factory.py                     # æ£€æµ‹å™¨å·¥å‚ï¼ˆPC/RKNNé€‰æ‹©ï¼‰
â”‚   â”‚   â”œâ”€â”€ pc_ultralytics.py             # PCç«¯Ultralyticsæ£€æµ‹å™¨
â”‚   â”‚   â”œâ”€â”€ rknn_backend.py               # RKNNæ¨ç†åç«¯
â”‚   â”‚   â””â”€â”€ coordinate_processor.py        # åæ ‡å¤„ç†å™¨ï¼ˆåƒç´ â†’ä¸–ç•Œâ†’æœºå™¨äººï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ calibration/                       # æ ‡å®šæœåŠ¡ â­æ–°å¢
â”‚   â”‚   â”œâ”€â”€ black_block_detector.py        # é»‘å—æ£€æµ‹å™¨
â”‚   â”‚   â””â”€â”€ calibrator.py                  # æ ‡å®šè®¡ç®—å™¨ï¼ˆXYä»¿å°„+Zçº¿æ€§ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ comm/                              # é€šä¿¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ tcp_server.py                  # TCPæœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ mqtt_client.py                 # MQTTå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ comm_manager.py                # é€šä¿¡ç®¡ç†å™¨ï¼ˆç»Ÿä¸€æ¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ command_router.py              # å‘½ä»¤è·¯ç”±å™¨
â”‚   â”‚   â””â”€â”€ handlers/                      # å‘½ä»¤å¤„ç†å™¨
â”‚   â”‚       â”œâ”€â”€ calibration.py             # æ ‡å®šå‘½ä»¤å¤„ç† â­æ–°å¢
â”‚   â”‚       â”œâ”€â”€ camera.py                  # ç›¸æœºå‘½ä»¤å¤„ç†
â”‚   â”‚       â”œâ”€â”€ config.py                  # é…ç½®å‘½ä»¤å¤„ç†
â”‚   â”‚       â”œâ”€â”€ detection.py               # æ£€æµ‹å‘½ä»¤å¤„ç†
â”‚   â”‚       â”œâ”€â”€ sftp.py                    # SFTPå‘½ä»¤å¤„ç†
â”‚   â”‚       â”œâ”€â”€ system.py                  # ç³»ç»Ÿå‘½ä»¤å¤„ç†
â”‚   â”‚       â”œâ”€â”€ tcp.py                     # TCPå‘½ä»¤å¤„ç†ï¼ˆcatchï¼‰
â”‚   â”‚       â””â”€â”€ context.py                 # å‘½ä»¤ä¸Šä¸‹æ–‡ï¼ˆä¾èµ–æ³¨å…¥ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ sftp/                              # SFTPæœåŠ¡
â”‚   â”‚   â””â”€â”€ sftp_client.py                 # SFTPå®¢æˆ·ç«¯ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ system/                            # ç³»ç»ŸæœåŠ¡
â”‚       â”œâ”€â”€ initializer.py                 # ç³»ç»Ÿåˆå§‹åŒ–å™¨
â”‚       â”œâ”€â”€ monitor.py                     # ç³»ç»Ÿç›‘æ§å™¨ï¼ˆå¥åº·æ£€æŸ¥ï¼‰
â”‚       â””â”€â”€ log_manager.py                 # æ—¥å¿—ç®¡ç†å™¨
â”‚
â”œâ”€â”€ infrastructure/                         # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ sick/                              # SICK SDKå°è£…
â”‚   â”‚   â””â”€â”€ common/                        # SICKé€šç”¨æ¨¡å—
â”‚   â”‚       â”œâ”€â”€ Control.py                 # ç›¸æœºæ§åˆ¶
â”‚   â”‚       â”œâ”€â”€ Stream.py                  # æ•°æ®æµå¤„ç†
â”‚   â”‚       â”œâ”€â”€ Protocol/                  # é€šä¿¡åè®®
â”‚   â”‚       â””â”€â”€ Streaming/                 # æµæ•°æ®è§£æ
â”‚   â””â”€â”€ hik/                               # æµ·åº·SDKå°è£…
â”‚
â”œâ”€â”€ configs/                                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml                        # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ transformation_matrix.json         # åæ ‡å˜æ¢çŸ©é˜µ
â”‚
â”œâ”€â”€ docs/                                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                          # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ architecture.md                    # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ configuration.md                   # é…ç½®è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ deployment.md                      # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ development.md                     # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ calibration_workflow.md            # æ ‡å®šå·¥ä½œæµç¨‹ â­æ–°å¢
â”‚
â”œâ”€â”€ scripts/                                # è¿ç»´è„šæœ¬
â”‚   â”œâ”€â”€ install.sh                         # å®‰è£…è„šæœ¬ï¼ˆLinuxï¼‰
â”‚   â””â”€â”€ visioncore.service                # systemdæœåŠ¡é…ç½®
â”‚
â”œâ”€â”€ tests/                                  # æµ‹è¯•
â”‚   â””â”€â”€ README.md                          # æµ‹è¯•è¯´æ˜
â”‚
â”œâ”€â”€ models/                                 # AIæ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€â”€ *.pt                               # PyTorchæ¨¡å‹
â”‚   â””â”€â”€ *.rknn                             # RKNNæ¨¡å‹
â”‚
â”œâ”€â”€ logs/                                   # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ .gitignore                             # Gitå¿½ç•¥é…ç½®
â”œâ”€â”€ LICENSE                                # å¼€æºè®¸å¯è¯
â””â”€â”€ README.md                              # æœ¬æ–‡æ¡£
```

---

## æ ¸å¿ƒæ¨¡å—

### 1. ç›¸æœºæ¨¡å— (`services/camera/`)

#### SICK 3D ç›¸æœº
```python
from services.camera.sick_camera import SickCamera

camera = SickCamera(ip="192.168.2.99", port=2122)
camera.connect()
frame = camera.get_frame(convert_to_mm=True)
# frameåŒ…å«: depthmap, intensity, cameraParams
```

**åŠŸèƒ½**:
- æ·±åº¦å›¾åƒé‡‡é›†
- å¼ºåº¦å›¾åƒé‡‡é›†
- ç›¸æœºå‚æ•°è·å–
- è‡ªåŠ¨é‡è¿æœºåˆ¶

#### HIK ToF ç›¸æœº
```python
from services.camera.hik_tof import HikToFCamera

camera = HikToFCamera()
camera.connect()
frame = camera.get_frame()
```

### 2. æ£€æµ‹æ¨¡å— (`services/detection/`)

#### å·¥å‚æ¨¡å¼è‡ªåŠ¨é€‰æ‹©
```python
from services.detection.factory import create_detector

# è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜åç«¯ï¼ˆPC/RKNNï¼‰
detector = create_detector(config)
results = detector.detect(image)
```

**æ”¯æŒçš„åç«¯**:
- **PC**: Ultralytics YOLO (CPU/GPU)
- **RKNN**: åµŒå…¥å¼åŠ é€Ÿï¼ˆRK3588ï¼‰
- **Auto**: è‡ªåŠ¨æ£€æµ‹å¹¶é€‰æ‹©

### 3. æ ‡å®šæ¨¡å— (`services/calibration/`) â­

#### é»‘å—æ£€æµ‹
```python
from services.calibration import detect_black_blocks

blocks = detect_black_blocks(image, max_blocks=12, rows=3, cols=4)
# è¿”å›: List[BlackBlock] - æŒ‰ç½‘æ ¼é¡ºåºæ’åˆ—
```

**ç®—æ³•ç‰¹æ€§**:
- å¤šç§äºŒå€¼åŒ–ç­–ç•¥ï¼ˆOtsuã€è‡ªé€‚åº”ã€CLAHEï¼‰
- ä¸¥æ ¼çš„è´¨é‡è¯„åˆ†ï¼ˆå½¢çŠ¶ã€å¯¹æ¯”åº¦ã€å®å¿ƒåº¦ï¼‰
- PCAç½‘æ ¼æ’åº
- å¤–ç‚¹å‰”é™¤

#### åæ ‡æ ‡å®š
```python
from services.calibration import calibrate_from_points

result = calibrate_from_points(
    world_points=[(xw1, yw1, zw1), ...],
    robot_points=[(xr1, yr1, zr1), ...],
    output_path="configs/transformation_matrix.json"
)
# è¿”å›: matrix, metadata (RMSE, è´¨é‡è¯„çº§)
```

**æ ‡å®šæ–¹æ³•**:
- XYå¹³é¢: 2Dä»¿å°„å˜æ¢ï¼ˆ6å‚æ•°ï¼‰
- Zè½´: çº¿æ€§æ˜ å°„ï¼ˆ2å‚æ•°: alpha*zw + betaï¼‰
- åˆæˆ: 4x4é½æ¬¡å˜æ¢çŸ©é˜µ

### 4. é€šä¿¡æ¨¡å— (`services/comm/`)

#### å‘½ä»¤è·¯ç”±å™¨
```python
from services.comm.command_router import CommandRouter

router = CommandRouter()
router.register_default()  # æ³¨å†Œæ‰€æœ‰é»˜è®¤å‘½ä»¤
router.bind(camera=cam, detector=det, config=cfg)  # æ³¨å…¥ä¾èµ–

response = router.route(request)  # è·¯ç”±å¹¶æ‰§è¡Œå‘½ä»¤
```

#### TCP æœåŠ¡å™¨
```python
from services.comm.tcp_server import TcpServer

server = TcpServer(host="0.0.0.0", port=8888)
server.start()
# è‡ªåŠ¨å¤„ç† "catch" å‘½ä»¤
```

#### MQTT å®¢æˆ·ç«¯
```python
from services.comm.mqtt_client import MqttClient

mqtt = MqttClient(broker="192.168.2.126", port=1883)
mqtt.connect()
mqtt.subscribe("sickvision/system/command", callback)
```

### 5. ç³»ç»Ÿæ¨¡å— (`services/system/`)

#### ç³»ç»Ÿåˆå§‹åŒ–å™¨
```python
from services.system.initializer import SystemInitializer

init = SystemInitializer(config_path="configs/config.yaml")
components = init.initialize_all()
# è¿”å›: camera, detector, tcp_server, mqtt_client, sftp, monitor
```

#### ç³»ç»Ÿç›‘æ§å™¨
```python
from services.system.monitor import SystemMonitor

monitor = SystemMonitor(logger)
monitor.register_component("camera", camera, restart_callback)
monitor.start_monitoring()
# è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œæ•…éšœé‡å¯
```

---

## æ”¯æŒçš„å‘½ä»¤

### MQTT å‘½ä»¤ï¼ˆè¿œç¨‹æ§åˆ¶ï¼‰

| å‘½ä»¤ | åŠŸèƒ½ | å‚æ•° | è¿”å› |
|------|------|------|------|
| `get_config` | è·å–ç³»ç»Ÿé…ç½® | - | å®Œæ•´é…ç½®å’Œæ¨¡å‹åˆ—è¡¨ |
| `save_config` | ä¿å­˜ç³»ç»Ÿé…ç½® | configå¯¹è±¡ | æˆåŠŸ/å¤±è´¥ |
| `get_image` | è·å–ç›¸æœºå›¾åƒ | - | å›¾åƒ+SFTPä¸Šä¼ ä¿¡æ¯ |
| `get_calibrat_image` | è·å–æ ‡å®šå›¾åƒ â­ | - | 12ä¸ªé»‘å—çš„ä¸–ç•Œåæ ‡ |
| `coordinate_calibration` | æ‰§è¡Œåæ ‡æ ‡å®š â­ | world_points, robot_points | å˜æ¢çŸ©é˜µ+RMSE |
| `model_test` | æµ‹è¯•AIæ¨¡å‹ | - | æ£€æµ‹æ•°é‡+æ¨ç†æ—¶é—´ |
| `sftp_test` | æµ‹è¯•SFTPè¿æ¥ | - | è¿æ¥çŠ¶æ€ |
| `get_system_status` | è·å–ç³»ç»ŸçŠ¶æ€ | - | å„ç»„ä»¶å¥åº·çŠ¶æ€ |
| `restart` | é‡å¯ç³»ç»Ÿ | - | ç¡®è®¤ |

### TCP å‘½ä»¤ï¼ˆå®æ—¶æ£€æµ‹ï¼‰

| å‘½ä»¤ | åŠŸèƒ½ | è¿”å›æ ¼å¼ | ç¤ºä¾‹ |
|------|------|----------|------|
| `catch` | æ‰§è¡Œå•æ¬¡æ£€æµ‹ | `count,x,y,z,angle` | `1,123.456,78.901,-45.123,90.000` |

**é”™è¯¯ç **:
- `0,0,0,0,0`: æœªæ£€æµ‹åˆ°ç›®æ ‡
- `E1,0,0,0,0`: ç›¸æœº/æ£€æµ‹å™¨æœªå°±ç»ª
- `E2,0,0,0,0`: æ£€æµ‹é¢‘ç‡è¿‡é«˜
- `E3,0,0,0,0`: æ­£åœ¨å¤„ç†ä¸­

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python**: 3.8+
- **æ“ä½œç³»ç»Ÿ**: Windows 10+ / Ubuntu 18.04+
- **ç¡¬ä»¶**: 
  - CPU: 4æ ¸ä»¥ä¸Š
  - å†…å­˜: 8GB+
  - ç›¸æœº: SICK 3D / HIK ToF

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd VisualCoreEnterpriseEdition

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å®‰è£…OpenCVï¼ˆå¦‚æœªå®‰è£…ï¼‰
pip install opencv-python opencv-contrib-python

# å®‰è£…Ultralyticsï¼ˆPCç«¯æ£€æµ‹ï¼‰
pip install ultralytics

# å®‰è£…MQTTå®¢æˆ·ç«¯
pip install paho-mqtt

# å®‰è£…å…¶ä»–ä¾èµ–
pip install numpy pyyaml paramiko
```

### é…ç½®æ–‡ä»¶

ç¼–è¾‘ `configs/config.yaml`:

```yaml
# ç›¸æœºé…ç½®
camera:
  enable: true
  connection:
    ip: 192.168.2.99        # ä¿®æ”¹ä¸ºä½ çš„ç›¸æœºIP
    port: 2122

# æ£€æµ‹æ¨¡å‹
model:
  backend: auto             # pc | rknn | auto
  path: models/your_model.pt
  conf_threshold: 0.5
  nms_threshold: 0.45

# TCPæœåŠ¡å™¨
DetectionServer:
  enable: true
  host: 0.0.0.0
  port: 8888

# MQTT
mqtt:
  enable: true
  connection:
    broker_host: 192.168.2.126
    broker_port: 1883
```

### è¿è¡Œç³»ç»Ÿ

```bash
# å¼€å‘æ¨¡å¼
python -m app.main

# æˆ–ç›´æ¥è¿è¡Œ
python app/main.py
```

### æµ‹è¯•è¿æ¥

#### æµ‹è¯•TCPï¼ˆä½¿ç”¨telnetæˆ–ncï¼‰
```bash
# Windows
telnet 192.168.2.126 8888
catch

# Linux
echo "catch" | nc 192.168.2.126 8888
```

#### æµ‹è¯•MQTTï¼ˆä½¿ç”¨mosquittoï¼‰
```bash
# è®¢é˜…å“åº”
mosquitto_sub -h 192.168.2.126 -t PI/robot/message

# å‘é€å‘½ä»¤
mosquitto_pub -h 192.168.2.126 -t sickvision/system/command \
  -m '{"command":"get_system_status"}'
```

---

## é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ç»“æ„

```yaml
# configs/config.yaml

logging:                    # æ—¥å¿—é…ç½®
  enable: true
  level: INFO              # DEBUG | INFO | WARNING | ERROR
  console:
    enable: true
  file:
    enable: true
    path: logs
    backup_count: 30

camera:                     # ç›¸æœºé…ç½®
  enable: true
  connection:
    ip: 192.168.2.99
    port: 2122
    timeout: 0
  mode:
    useSingleStep: true    # å•æ­¥æ¨¡å¼

model:                      # AIæ¨¡å‹é…ç½®
  backend: auto            # pc | rknn | auto
  path: models/xxx.pt
  conf_threshold: 0.5      # ç½®ä¿¡åº¦é˜ˆå€¼
  nms_threshold: 0.45      # NMSé˜ˆå€¼

DetectionServer:            # TCPæœåŠ¡å™¨
  enable: true
  host: 0.0.0.0
  port: 8888
  max_connections: 15
  buffer_size: 4096
  connection_timeout: 300

mqtt:                       # MQTTé€šä¿¡
  enable: true
  connection:
    broker_host: 192.168.2.126
    broker_port: 1883
    client_id: visioncorepro
  topics:
    subscribe:
      system_command: sickvision/system/command
    publish:
      message: PI/robot/message

roi:                        # ROIåŒºåŸŸ
  enable: true
  width: 200               # ROIå®½åº¦ï¼ˆåƒç´ ï¼‰
  height: 100              # ROIé«˜åº¦ï¼ˆåƒç´ ï¼‰
  offsetx: 300             # Xåç§»
  offsety: 200             # Yåç§»
  minArea: 2500            # æœ€å°é¢ç§¯é˜ˆå€¼ï¼ˆåƒç´ Â²ï¼‰

sftp:                       # SFTPæ–‡ä»¶ä¼ è¾“
  enable: true
  host: 192.168.2.126
  port: 22
  username: qt
  password: '123456'
  remote_path: /
  connection_timeout: 15
```

---

## éƒ¨ç½²æŒ‡å—

### Linux ç³»ç»ŸæœåŠ¡éƒ¨ç½²

#### 1. å®‰è£…åˆ°ç³»ç»Ÿç›®å½•
```bash
sudo cp -r . /opt/VisionCoreEE
cd /opt/VisionCoreEE
sudo pip3 install -r requirements.txt
```

#### 2. é…ç½® systemd æœåŠ¡
```bash
sudo cp scripts/visioncore.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable visioncore
sudo systemctl start visioncore
```

#### 3. æŸ¥çœ‹çŠ¶æ€å’Œæ—¥å¿—
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status visioncore

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo journalctl -u visioncore -f

# é‡å¯æœåŠ¡
sudo systemctl restart visioncore
```

### Windows æœåŠ¡éƒ¨ç½²

ä½¿ç”¨ NSSM (Non-Sucking Service Manager):

```cmd
# ä¸‹è½½NSSM: https://nssm.cc/download

# å®‰è£…æœåŠ¡
nssm install VisionCoreEE "C:\Python38\python.exe" "C:\VisionCoreEE\app\main.py"

# å¯åŠ¨æœåŠ¡
nssm start VisionCoreEE

# æŸ¥çœ‹çŠ¶æ€
nssm status VisionCoreEE
```

### Docker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

```dockerfile
FROM python:3.8-slim

WORKDIR /app
COPY . /app

RUN pip install --no-cache-dir -r requirements.txt

CMD ["python", "-m", "app.main"]
```

```bash
# æ„å»ºé•œåƒ
docker build -t visioncore-ee .

# è¿è¡Œå®¹å™¨
docker run -d --name visioncore \
  -p 8888:8888 \
  -v ./configs:/app/configs \
  -v ./logs:/app/logs \
  visioncore-ee
```

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ç›¸æœºæ”¯æŒ

1. åœ¨ `services/camera/` åˆ›å»ºæ–°æ–‡ä»¶ `your_camera.py`
2. å®ç°ç›¸æœºæ¥å£ï¼ˆå‚è€ƒ `sick_camera.py`ï¼‰
3. åœ¨é…ç½®ä¸­æ·»åŠ ç›¸æœºé€‰é¡¹
4. åœ¨åˆå§‹åŒ–å™¨ä¸­æ³¨å†Œ

### æ·»åŠ æ–°çš„æ£€æµ‹åç«¯

1. åœ¨ `services/detection/` åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿ `DetectorBase` åŸºç±»
3. å®ç° `detect()` æ–¹æ³•
4. åœ¨å·¥å‚ (`factory.py`) ä¸­æ³¨å†Œ

### æ·»åŠ æ–°çš„MQTTå‘½ä»¤

1. åœ¨ `domain/enums/commands.py` æ·»åŠ å‘½ä»¤æšä¸¾
2. åœ¨ `services/comm/handlers/` åˆ›å»ºå¤„ç†å™¨
3. åœ¨ `command_router.py` æ³¨å†Œå‘½ä»¤

```python
# 1. æ·»åŠ æšä¸¾
class VisionCoreCommands(Enum):
    NEW_COMMAND = "new_command"

# 2. åˆ›å»ºå¤„ç†å™¨
def handle_new_command(req: MQTTResponse, ctx: CommandContext):
    # å®ç°é€»è¾‘
    return MQTTResponse(...)

# 3. æ³¨å†Œå‘½ä»¤
router.register(VisionCoreCommands.NEW_COMMAND.value, 
                lambda req: handle_new_command(req, self._ctx))
```

### ä»£ç è§„èŒƒ

- **å‘½å**: 
  - ç±»å: PascalCase (`SickCamera`)
  - å‡½æ•°/å˜é‡: snake_case (`get_frame`)
  - å¸¸é‡: UPPER_CASE (`MAX_RETRY`)
- **æ³¨é‡Š**: ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šï¼Œå‡½æ•°éœ€docstring
- **ç±»å‹æç¤º**: å°½é‡æ·»åŠ ç±»å‹æç¤º
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€ä½¿ç”¨ try-exceptï¼Œè®°å½•æ—¥å¿—

---

## æ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£

- ğŸ“ [**æ ‡å®šå·¥ä½œæµç¨‹**](docs/calibration_workflow.md) - åæ ‡æ ‡å®šå®Œæ•´æŒ‡å—
- ğŸ—ï¸ [æ¶æ„è®¾è®¡](docs/architecture.md) - ç³»ç»Ÿæ¶æ„è¯¦è§£
- âš™ï¸ [é…ç½®è¯´æ˜](docs/configuration.md) - é…ç½®é¡¹è¯¦ç»†è¯´æ˜
- ğŸš€ [éƒ¨ç½²æŒ‡å—](docs/deployment.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- ğŸ’» [å¼€å‘æŒ‡å—](docs/development.md) - å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µ

### API æ–‡æ¡£

å„æ¨¡å—çš„è¯¦ç»†APIæ–‡æ¡£è¯·æŸ¥çœ‹æºç ä¸­çš„docstringã€‚

---

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-11-10)

#### âœ… å·²å®ŒæˆåŠŸèƒ½

- âœ… **æ ¸å¿ƒæ¶æ„é‡æ„**: DDDåˆ†å±‚æ¶æ„ï¼Œæ¸…æ™°çš„æ¨¡å—åˆ’åˆ†
- âœ… **ç›¸æœºæ”¯æŒ**: SICK 3Dç›¸æœºã€HIK ToFç›¸æœº
- âœ… **æ£€æµ‹å¼•æ“**: Ultralytics YOLO (PC) + RKNN (åµŒå…¥å¼)
- âœ… **åŒé€šä¿¡åè®®**: TCPæœåŠ¡å™¨ + MQTTå®¢æˆ·ç«¯
- âœ… **å‘½ä»¤è·¯ç”±**: ç»Ÿä¸€çš„å‘½ä»¤åˆ†å‘æœºåˆ¶
- âœ… **åæ ‡æ ‡å®š**: é»‘å—æ£€æµ‹ + ä¸¤æ­¥å·¥ä½œæµ â­
- âœ… **ç³»ç»Ÿç›‘æ§**: å¥åº·æ£€æŸ¥ + è‡ªåŠ¨é‡å¯
- âœ… **æ—¥å¿—ç³»ç»Ÿ**: åˆ†çº§æ—¥å¿— + æŒ‰æ—¥è½®è½¬
- âœ… **SFTPä¼ è¾“**: æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½

#### ğŸš§ è®¡åˆ’åŠŸèƒ½

- â³ å•å…ƒæµ‹è¯•è¦†ç›–
- â³ é…ç½®æ ¡éªŒï¼ˆJSON Schemaï¼‰
- â³ Webç®¡ç†ç•Œé¢
- â³ æ•°æ®åº“é›†æˆ
- â³ Dockeré•œåƒ

---

## æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| TCPå“åº”å»¶è¿Ÿ | < 200ms | å•æ¬¡æ£€æµ‹å¹³å‡å“åº” |
| æ£€æµ‹é€Ÿåº¦ | 30-50 FPS | PCç«¯ï¼ˆGPUåŠ é€Ÿï¼‰ |
| ç›¸æœºå¸§ç‡ | 10-30 FPS | å–å†³äºç›¸æœºå‹å· |
| å¹¶å‘è¿æ¥ | 15ä¸ª | TCPæœ€å¤§å¹¶å‘æ•° |
| å†…å­˜å ç”¨ | < 500MB | æ­£å¸¸è¿è¡Œæ—¶ |
| æ ‡å®šç²¾åº¦ | XY: 2-3mm, Z: 3-5mm | å…¸å‹å€¼ |

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### Q1: ç›¸æœºè¿æ¥å¤±è´¥

**æ£€æŸ¥**:
```bash
# æµ‹è¯•ç½‘ç»œè¿é€šæ€§
ping 192.168.2.99

# æµ‹è¯•ç«¯å£
telnet 192.168.2.99 2122
```

**è§£å†³**: æ£€æŸ¥IPé…ç½®ã€ç½‘ç»œè¿æ¥ã€ç›¸æœºç”µæº

#### Q2: æ£€æµ‹å™¨åŠ è½½å¤±è´¥

**æ£€æŸ¥**:
- æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- Pythonä¾èµ–æ˜¯å¦å®Œæ•´
- åç«¯é€‰æ‹©æ˜¯å¦æ­£ç¡®

#### Q3: MQTTè¿æ¥å¤±è´¥

**æ£€æŸ¥**:
```bash
# æµ‹è¯•MQTTä»£ç†
mosquitto_pub -h 192.168.2.126 -t test -m "hello"
```

**è§£å†³**: æ£€æŸ¥ä»£ç†åœ°å€ã€ç«¯å£ã€è®¤è¯ä¿¡æ¯

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## æŠ€æœ¯æ”¯æŒ

- ğŸ“§ Email: support@visioncore.com
- ğŸ“ Issues: [GitHub Issues](https://github.com/your-org/VisionCoreEE/issues)
- ğŸ“– Wiki: [é¡¹ç›®Wiki](https://github.com/your-org/VisionCoreEE/wiki)

---

## è‡´è°¢

- [Ultralytics YOLO](https://github.com/ultralytics/ultralytics) - æ£€æµ‹å¼•æ“
- [SICK AG](https://www.sick.com/) - SICK SDK
- [Paho MQTT](https://www.eclipse.org/paho/) - MQTTå®¢æˆ·ç«¯
- [OpenCV](https://opencv.org/) - å›¾åƒå¤„ç†

---

<div align="center">

**Built with â¤ï¸ for Industrial Automation**

[â¬† è¿”å›é¡¶éƒ¨](#visioncore-enterprise-edition)

</div>
